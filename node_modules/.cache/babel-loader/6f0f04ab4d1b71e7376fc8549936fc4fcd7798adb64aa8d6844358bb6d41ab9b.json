{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.function.name.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.regexp.test.js\");\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.symbol.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/es.map.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/es.array.join.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nrequire(\"core-js/modules/es.string.trim.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/web.url.js\");\nrequire(\"core-js/modules/web.url-search-params.js\");\nrequire(\"core-js/modules/es.string.repeat.js\");\nrequire(\"core-js/modules/es.string.split.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nexports.handlePrint = handlePrint;\nexports.readLocalFile = readLocalFile;\nexports.saveLocalFile = saveLocalFile;\nvar _xeUtils = _interopRequireDefault(require(\"xe-utils\"));\nvar _conf = _interopRequireDefault(require(\"../../v-x-e-table/src/conf\"));\nvar _vXETable = _interopRequireDefault(require(\"../../v-x-e-table\"));\nvar _utils = _interopRequireDefault(require(\"../../tools/utils\"));\nvar _util = require(\"../../table/src/util\");\nvar _dom = require(\"../../tools/dom\");\nvar _log = require(\"../../tools/log\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nvar formatText = _utils.default.formatText;\n\n// 默认导出或打印的 HTML 样式\nvar defaultHtmlStyle = 'body{margin:0;color:#333333;font-size:14px;font-family:\"Microsoft YaHei\",微软雅黑,\"MicrosoftJhengHei\",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type=\"checkbox\"]{margin:0}.vxe-table input[type=\"checkbox\"],.vxe-table input[type=\"radio\"],.vxe-table input[type=\"checkbox\"]+span,.vxe-table input[type=\"radio\"]+span{vertical-align:middle;padding-left:0.4em}';\nvar htmlCellElem;\n\n// 导入\nvar fileForm;\nvar fileInput;\n\n// 打印\nvar printFrame;\nvar csvBOM = \"\\uFEFF\";\nvar enterSymbol = '\\r\\n';\nfunction createFrame() {\n  var frame = document.createElement('iframe');\n  frame.className = 'vxe-table--print-frame';\n  return frame;\n}\nfunction getExportBlobByContent(content, options) {\n  if (window.Blob) {\n    return new Blob([content], {\n      type: \"text/\".concat(options.type, \";charset=utf-8;\")\n    });\n  }\n  return null;\n}\nfunction hasTreeChildren($xetable, row) {\n  var treeOpts = $xetable.treeOpts;\n  return row[treeOpts.children] && row[treeOpts.children].length > 0;\n}\nfunction getSeq($xetable, row, $rowIndex, column, $columnIndex) {\n  var seqOpts = $xetable.seqOpts;\n  var seqMethod = seqOpts.seqMethod || column.seqMethod;\n  if (seqMethod) {\n    return seqMethod({\n      row: row,\n      rowIndex: $xetable.getRowIndex(row),\n      $rowIndex: $rowIndex,\n      column: column,\n      columnIndex: $xetable.getColumnIndex(column),\n      $columnIndex: $columnIndex\n    });\n  }\n  return $xetable.getRowSeq(row);\n}\nfunction defaultFilterExportColumn(column) {\n  return column.property || ['seq', 'checkbox', 'radio'].indexOf(column.type) > -1;\n}\nfunction toTableBorder(border) {\n  if (border === true) {\n    return 'full';\n  }\n  if (border) {\n    return border;\n  }\n  return 'default';\n}\nfunction toBooleanValue(cellValue) {\n  return _xeUtils.default.isBoolean(cellValue) ? cellValue ? 'TRUE' : 'FALSE' : cellValue;\n}\nfunction getLabelData($xetable, opts, columns, datas) {\n  var isAllExpand = opts.isAllExpand,\n    mode = opts.mode;\n  var treeConfig = $xetable.treeConfig,\n    treeOpts = $xetable.treeOpts,\n    radioOpts = $xetable.radioOpts,\n    checkboxOpts = $xetable.checkboxOpts;\n  if (!htmlCellElem) {\n    htmlCellElem = document.createElement('div');\n  }\n  if (treeConfig) {\n    // 如果是树表格只允许导出数据源\n    var rest = [];\n    var expandMaps = new Map();\n    _xeUtils.default.eachTree(datas, function (item, $rowIndex, items, path, parent, nodes) {\n      var row = item._row || item;\n      var parentRow = parent && parent._row ? parent._row : parent;\n      if (isAllExpand || !parentRow || expandMaps.has(parentRow) && $xetable.isTreeExpandByRow(parentRow)) {\n        var hasRowChild = hasTreeChildren($xetable, row);\n        var _item = {\n          _row: row,\n          _level: nodes.length - 1,\n          _hasChild: hasRowChild,\n          _expand: hasRowChild && $xetable.isTreeExpandByRow(row)\n        };\n        columns.forEach(function (column, $columnIndex) {\n          var cellValue = '';\n          var renderOpts = column.editRender || column.cellRender;\n          var exportLabelMethod = column.exportMethod;\n          if (!exportLabelMethod && renderOpts && renderOpts.name) {\n            var compConf = _vXETable.default.renderer.get(renderOpts.name);\n            if (compConf) {\n              exportLabelMethod = compConf.exportMethod || compConf.cellExportMethod;\n            }\n          }\n          if (exportLabelMethod) {\n            cellValue = exportLabelMethod({\n              $table: $xetable,\n              row: row,\n              column: column,\n              options: opts\n            });\n          } else {\n            switch (column.type) {\n              case 'seq':\n                cellValue = mode === 'all' ? path.map(function (num, i) {\n                  return i % 2 === 0 ? Number(num) + 1 : '.';\n                }).join('') : getSeq($xetable, row, $rowIndex, column, $columnIndex);\n                break;\n              case 'checkbox':\n                cellValue = toBooleanValue($xetable.isCheckedByCheckboxRow(row));\n                _item._checkboxLabel = checkboxOpts.labelField ? _xeUtils.default.get(row, checkboxOpts.labelField) : '';\n                _item._checkboxDisabled = checkboxOpts.checkMethod && !checkboxOpts.checkMethod({\n                  row: row\n                });\n                break;\n              case 'radio':\n                cellValue = toBooleanValue($xetable.isCheckedByRadioRow(row));\n                _item._radioLabel = radioOpts.labelField ? _xeUtils.default.get(row, radioOpts.labelField) : '';\n                _item._radioDisabled = radioOpts.checkMethod && !radioOpts.checkMethod({\n                  row: row\n                });\n                break;\n              default:\n                if (opts.original) {\n                  cellValue = _utils.default.getCellValue(row, column);\n                } else {\n                  cellValue = $xetable.getCellLabel(row, column);\n                  if (column.type === 'html') {\n                    htmlCellElem.innerHTML = cellValue;\n                    cellValue = htmlCellElem.innerText.trim();\n                  } else {\n                    var cell = $xetable.getCell(row, column);\n                    if (cell) {\n                      cellValue = cell.innerText.trim();\n                    }\n                  }\n                }\n            }\n          }\n          _item[column.id] = _xeUtils.default.toValueString(cellValue);\n        });\n        expandMaps.set(row, 1);\n        rest.push(Object.assign(_item, row));\n      }\n    }, treeOpts);\n    return rest;\n  }\n  return datas.map(function (row, $rowIndex) {\n    var item = {\n      _row: row\n    };\n    columns.forEach(function (column, $columnIndex) {\n      var cellValue = '';\n      var renderOpts = column.editRender || column.cellRender;\n      var exportLabelMethod = column.exportMethod;\n      if (!exportLabelMethod && renderOpts && renderOpts.name) {\n        var compConf = _vXETable.default.renderer.get(renderOpts.name);\n        if (compConf) {\n          exportLabelMethod = compConf.exportMethod || compConf.cellExportMethod;\n        }\n      }\n      if (exportLabelMethod) {\n        cellValue = exportLabelMethod({\n          $table: $xetable,\n          row: row,\n          column: column,\n          options: opts\n        });\n      } else {\n        switch (column.type) {\n          case 'seq':\n            cellValue = mode === 'all' ? $rowIndex + 1 : getSeq($xetable, row, $rowIndex, column, $columnIndex);\n            break;\n          case 'checkbox':\n            cellValue = toBooleanValue($xetable.isCheckedByCheckboxRow(row));\n            item._checkboxLabel = checkboxOpts.labelField ? _xeUtils.default.get(row, checkboxOpts.labelField) : '';\n            item._checkboxDisabled = checkboxOpts.checkMethod && !checkboxOpts.checkMethod({\n              row: row\n            });\n            break;\n          case 'radio':\n            cellValue = toBooleanValue($xetable.isCheckedByRadioRow(row));\n            item._radioLabel = radioOpts.labelField ? _xeUtils.default.get(row, radioOpts.labelField) : '';\n            item._radioDisabled = radioOpts.checkMethod && !radioOpts.checkMethod({\n              row: row\n            });\n            break;\n          default:\n            if (opts.original) {\n              cellValue = _utils.default.getCellValue(row, column);\n            } else {\n              cellValue = $xetable.getCellLabel(row, column);\n              if (column.type === 'html') {\n                htmlCellElem.innerHTML = cellValue;\n                cellValue = htmlCellElem.innerText.trim();\n              } else {\n                var cell = $xetable.getCell(row, column);\n                if (cell) {\n                  cellValue = cell.innerText.trim();\n                }\n              }\n            }\n        }\n      }\n      item[column.id] = _xeUtils.default.toValueString(cellValue);\n    });\n    return item;\n  });\n}\nfunction getExportData($xetable, opts) {\n  var columns = opts.columns,\n    dataFilterMethod = opts.dataFilterMethod;\n  var datas = opts.data;\n  if (dataFilterMethod) {\n    datas = datas.filter(function (row, index) {\n      return dataFilterMethod({\n        row: row,\n        $rowIndex: index\n      });\n    });\n  }\n  return getLabelData($xetable, opts, columns, datas);\n}\nfunction getBooleanValue(cellValue) {\n  return cellValue === 'TRUE' || cellValue === 'true' || cellValue === true;\n}\nfunction getHeaderTitle(opts, column) {\n  return (opts.original ? column.property : column.getTitle()) || '';\n}\nfunction getFooterCellValue($xetable, opts, items, column) {\n  var renderOpts = column.editRender || column.cellRender;\n  var exportLabelMethod = column.footerExportMethod;\n  if (!exportLabelMethod && renderOpts && renderOpts.name) {\n    var compConf = _vXETable.default.renderer.get(renderOpts.name);\n    if (compConf) {\n      exportLabelMethod = compConf.footerExportMethod || compConf.footerCellExportMethod;\n    }\n  }\n  var _columnIndex = $xetable.getVTColumnIndex(column);\n  var cellValue = exportLabelMethod ? exportLabelMethod({\n    $table: $xetable,\n    items: items,\n    itemIndex: _columnIndex,\n    _columnIndex: _columnIndex,\n    column: column,\n    options: opts\n  }) : _xeUtils.default.toValueString(items[_columnIndex]);\n  return cellValue;\n}\nfunction getFooterData(opts, footerTableData) {\n  var footerFilterMethod = opts.footerFilterMethod;\n  return footerFilterMethod ? footerTableData.filter(function (items, index) {\n    return footerFilterMethod({\n      items: items,\n      $rowIndex: index\n    });\n  }) : footerTableData;\n}\nfunction getCsvCellTypeLabel(column, cellValue) {\n  if (cellValue) {\n    if (column.type === 'seq') {\n      return \"\\t\".concat(cellValue);\n    }\n    switch (column.cellType) {\n      case 'string':\n        if (!isNaN(cellValue)) {\n          return \"\\t\".concat(cellValue);\n        }\n        break;\n      case 'number':\n        break;\n      default:\n        if (cellValue.length >= 12 && !isNaN(cellValue)) {\n          return \"\\t\".concat(cellValue);\n        }\n        break;\n    }\n  }\n  return cellValue;\n}\nfunction toTxtCellLabel(val) {\n  if (/[\",\\s\\n]/.test(val)) {\n    return \"\\\"\".concat(val.replace(/\"/g, '\"\"'), \"\\\"\");\n  }\n  return val;\n}\nfunction toCsv($xetable, opts, columns, datas) {\n  var content = csvBOM;\n  if (opts.isHeader) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(getHeaderTitle(opts, column));\n    }).join(',') + enterSymbol;\n  }\n  datas.forEach(function (row) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(getCsvCellTypeLabel(column, row[column.id]));\n    }).join(',') + enterSymbol;\n  });\n  if (opts.isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    footers.forEach(function (rows) {\n      content += columns.map(function (column) {\n        return toTxtCellLabel(getFooterCellValue($xetable, opts, rows, column));\n      }).join(',') + enterSymbol;\n    });\n  }\n  return content;\n}\nfunction toTxt($xetable, opts, columns, datas) {\n  var content = '';\n  if (opts.isHeader) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(getHeaderTitle(opts, column));\n    }).join('\\t') + enterSymbol;\n  }\n  datas.forEach(function (row) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(row[column.id]);\n    }).join('\\t') + enterSymbol;\n  });\n  if (opts.isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    footers.forEach(function (rows) {\n      content += columns.map(function (column) {\n        return toTxtCellLabel(getFooterCellValue($xetable, opts, rows, column));\n      }).join(',') + enterSymbol;\n    });\n  }\n  return content;\n}\nfunction hasEllipsis($xetable, column, property, allColumnOverflow) {\n  var columnOverflow = column[property];\n  var headOverflow = _xeUtils.default.isUndefined(columnOverflow) || _xeUtils.default.isNull(columnOverflow) ? allColumnOverflow : columnOverflow;\n  var showEllipsis = headOverflow === 'ellipsis';\n  var showTitle = headOverflow === 'title';\n  var showTooltip = headOverflow === true || headOverflow === 'tooltip';\n  var isEllipsis = showTitle || showTooltip || showEllipsis;\n  // 虚拟滚动不支持动态高度\n  if (($xetable.scrollXLoad || $xetable.scrollYLoad) && !isEllipsis) {\n    isEllipsis = true;\n  }\n  return isEllipsis;\n}\nfunction createHtmlPage(opts, content) {\n  var style = opts.style;\n  return ['<!DOCTYPE html><html>', '<head>', '<meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui\">', \"<title>\".concat(opts.sheetName, \"</title>\"), \"<style>\".concat(defaultHtmlStyle, \"</style>\"), style ? \"<style>\".concat(style, \"</style>\") : '', '</head>', \"<body>\".concat(content, \"</body>\"), '</html>'].join('');\n}\nfunction toHtml($xetable, opts, columns, datas) {\n  var id = $xetable.id,\n    border = $xetable.border,\n    treeConfig = $xetable.treeConfig,\n    treeOpts = $xetable.treeOpts,\n    isAllSelected = $xetable.isAllSelected,\n    isIndeterminate = $xetable.isIndeterminate,\n    allHeaderAlign = $xetable.headerAlign,\n    allAlign = $xetable.align,\n    allFooterAlign = $xetable.footerAlign,\n    allColumnOverflow = $xetable.showOverflow,\n    allColumnHeaderOverflow = $xetable.showHeaderOverflow,\n    mergeList = $xetable.mergeList;\n  var isPrint = opts.print,\n    isHeader = opts.isHeader,\n    isFooter = opts.isFooter,\n    isColgroup = opts.isColgroup,\n    isMerge = opts.isMerge,\n    colgroups = opts.colgroups,\n    original = opts.original;\n  var allCls = 'check-all';\n  var clss = ['vxe-table', \"border--\".concat(toTableBorder(border)), isPrint ? 'is--print' : '', isHeader ? 'is--header' : ''].filter(function (cls) {\n    return cls;\n  });\n  var tables = [\"<table class=\\\"\".concat(clss.join(' '), \"\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\"), \"<colgroup>\".concat(columns.map(function (column) {\n    return \"<col style=\\\"width:\".concat(column.renderWidth, \"px\\\">\");\n  }).join(''), \"</colgroup>\")];\n  if (isHeader) {\n    tables.push('<thead>');\n    if (isColgroup && !original) {\n      colgroups.forEach(function (cols) {\n        tables.push(\"<tr>\".concat(cols.map(function (column) {\n          var headAlign = column.headerAlign || column.align || allHeaderAlign || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showHeaderOverflow', allColumnHeaderOverflow) ? ['col--ellipsis'] : [];\n          var cellTitle = getHeaderTitle(opts, column);\n          var childWidth = 0;\n          var countChild = 0;\n          _xeUtils.default.eachTree([column], function (item) {\n            if (!item.childNodes || !column.childNodes.length) {\n              countChild++;\n            }\n            childWidth += item.renderWidth;\n          }, {\n            children: 'childNodes'\n          });\n          var cellWidth = childWidth - countChild;\n          if (headAlign) {\n            classNames.push(\"col--\".concat(headAlign));\n          }\n          if (column.type === 'checkbox') {\n            return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\" colspan=\\\"\").concat(column._colSpan, \"\\\" rowspan=\\\"\").concat(column._rowSpan, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(cellWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" class=\\\"\").concat(allCls, \"\\\" \").concat(isAllSelected ? 'checked' : '', \"><span>\").concat(cellTitle, \"</span></div></th>\");\n          }\n          return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\" colspan=\\\"\").concat(column._colSpan, \"\\\" rowspan=\\\"\").concat(column._rowSpan, \"\\\" title=\\\"\").concat(cellTitle, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(cellWidth, \"px\\\"\"), \"><span>\").concat(formatText(cellTitle, true), \"</span></div></th>\");\n        }).join(''), \"</tr>\"));\n      });\n    } else {\n      tables.push(\"<tr>\".concat(columns.map(function (column) {\n        var headAlign = column.headerAlign || column.align || allHeaderAlign || allAlign;\n        var classNames = hasEllipsis($xetable, column, 'showHeaderOverflow', allColumnHeaderOverflow) ? ['col--ellipsis'] : [];\n        var cellTitle = getHeaderTitle(opts, column);\n        if (headAlign) {\n          classNames.push(\"col--\".concat(headAlign));\n        }\n        if (column.type === 'checkbox') {\n          return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" class=\\\"\").concat(allCls, \"\\\" \").concat(isAllSelected ? 'checked' : '', \"><span>\").concat(cellTitle, \"</span></div></th>\");\n        }\n        return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellTitle, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><span>\").concat(formatText(cellTitle, true), \"</span></div></th>\");\n      }).join(''), \"</tr>\"));\n    }\n    tables.push('</thead>');\n  }\n  if (datas.length) {\n    tables.push('<tbody>');\n    if (treeConfig) {\n      datas.forEach(function (item) {\n        tables.push('<tr>' + columns.map(function (column) {\n          var cellAlign = column.align || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showOverflow', allColumnOverflow) ? ['col--ellipsis'] : [];\n          var cellValue = item[column.id];\n          if (cellAlign) {\n            classNames.push(\"col--\".concat(cellAlign));\n          }\n          if (column.treeNode) {\n            var treeIcon = '';\n            if (item._hasChild) {\n              treeIcon = \"<i class=\\\"\".concat(item._expand ? 'vxe-table--tree-fold-icon' : 'vxe-table--tree-unfold-icon', \"\\\"></i>\");\n            }\n            classNames.push('vxe-table--tree-node');\n            if (column.type === 'radio') {\n              return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><div class=\\\"vxe-table--tree-node-wrapper\\\" style=\\\"padding-left: \").concat(item._level * treeOpts.indent, \"px\\\"><div class=\\\"vxe-table--tree-icon-wrapper\\\">\").concat(treeIcon, \"</div><div class=\\\"vxe-table--tree-cell\\\"><input type=\\\"radio\\\" name=\\\"radio_\").concat(id, \"\\\" \").concat(item._radioDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._radioLabel, \"</span></div></div></div></td>\");\n            } else if (column.type === 'checkbox') {\n              return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><div class=\\\"vxe-table--tree-node-wrapper\\\" style=\\\"padding-left: \").concat(item._level * treeOpts.indent, \"px\\\"><div class=\\\"vxe-table--tree-icon-wrapper\\\">\").concat(treeIcon, \"</div><div class=\\\"vxe-table--tree-cell\\\"><input type=\\\"checkbox\\\" \").concat(item._checkboxDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._checkboxLabel, \"</span></div></div></div></td>\");\n            }\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><div class=\\\"vxe-table--tree-node-wrapper\\\" style=\\\"padding-left: \").concat(item._level * treeOpts.indent, \"px\\\"><div class=\\\"vxe-table--tree-icon-wrapper\\\">\").concat(treeIcon, \"</div><div class=\\\"vxe-table--tree-cell\\\">\").concat(cellValue, \"</div></div></div></td>\");\n          }\n          if (column.type === 'radio') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"radio\\\" name=\\\"radio_\").concat(id, \"\\\" \").concat(item._radioDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._radioLabel, \"</span></div></td>\");\n          } else if (column.type === 'checkbox') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" \").concat(item._checkboxDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._checkboxLabel, \"</span></div></td>\");\n          }\n          return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \">\").concat(formatText(cellValue, true), \"</div></td>\");\n        }).join('') + '</tr>');\n      });\n    } else {\n      datas.forEach(function (item) {\n        tables.push('<tr>' + columns.map(function (column) {\n          var cellAlign = column.align || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showOverflow', allColumnOverflow) ? ['col--ellipsis'] : [];\n          var cellValue = item[column.id];\n          var rowSpan = 1;\n          var colSpan = 1;\n          if (isMerge && mergeList.length) {\n            var _rowIndex = $xetable.getVTRowIndex(item._row);\n            var _columnIndex = $xetable.getVTColumnIndex(column);\n            var spanRest = (0, _util.mergeBodyMethod)(mergeList, _rowIndex, _columnIndex);\n            if (spanRest) {\n              var rowspan = spanRest.rowspan,\n                colspan = spanRest.colspan;\n              if (!rowspan || !colspan) {\n                return '';\n              }\n              if (rowspan > 1) {\n                rowSpan = rowspan;\n              }\n              if (colspan > 1) {\n                colSpan = colspan;\n              }\n            }\n          }\n          if (cellAlign) {\n            classNames.push(\"col--\".concat(cellAlign));\n          }\n          if (column.type === 'radio') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" rowspan=\\\"\").concat(rowSpan, \"\\\" colspan=\\\"\").concat(colSpan, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"radio\\\" name=\\\"radio_\").concat(id, \"\\\" \").concat(item._radioDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._radioLabel, \"</span></div></td>\");\n          } else if (column.type === 'checkbox') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" rowspan=\\\"\").concat(rowSpan, \"\\\" colspan=\\\"\").concat(colSpan, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" \").concat(item._checkboxDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._checkboxLabel, \"</span></div></td>\");\n          }\n          return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" rowspan=\\\"\").concat(rowSpan, \"\\\" colspan=\\\"\").concat(colSpan, \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \">\").concat(formatText(cellValue, true), \"</div></td>\");\n        }).join('') + '</tr>');\n      });\n    }\n    tables.push('</tbody>');\n  }\n  if (isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    if (footers.length) {\n      tables.push('<tfoot>');\n      footers.forEach(function (rows) {\n        tables.push(\"<tr>\".concat(columns.map(function (column) {\n          var footAlign = column.footerAlign || column.align || allFooterAlign || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showOverflow', allColumnOverflow) ? ['col--ellipsis'] : [];\n          var cellValue = getFooterCellValue($xetable, opts, rows, column);\n          if (footAlign) {\n            classNames.push(\"col--\".concat(footAlign));\n          }\n          return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \">\").concat(formatText(cellValue, true), \"</div></td>\");\n        }).join(''), \"</tr>\"));\n      });\n      tables.push('</tfoot>');\n    }\n  }\n  // 是否半选状态\n  var script = !isAllSelected && isIndeterminate ? \"<script>(function(){var a=document.querySelector(\\\".\".concat(allCls, \"\\\");if(a){a.indeterminate=true}})()</script>\") : '';\n  tables.push('</table>', script);\n  return isPrint ? tables.join('') : createHtmlPage(opts, tables.join(''));\n}\nfunction toXML($xetable, opts, columns, datas) {\n  var xml = ['<?xml version=\"1.0\"?>', '<?mso-application progid=\"Excel.Sheet\"?>', '<Workbook xmlns=\"urn:schemas-microsoft-com:office:spreadsheet\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\" xmlns:html=\"http://www.w3.org/TR/REC-html40\">', '<DocumentProperties xmlns=\"urn:schemas-microsoft-com:office:office\">', '<Version>16.00</Version>', '</DocumentProperties>', '<ExcelWorkbook xmlns=\"urn:schemas-microsoft-com:office:excel\">', '<WindowHeight>7920</WindowHeight>', '<WindowWidth>21570</WindowWidth>', '<WindowTopX>32767</WindowTopX>', '<WindowTopY>32767</WindowTopY>', '<ProtectStructure>False</ProtectStructure>', '<ProtectWindows>False</ProtectWindows>', '</ExcelWorkbook>', \"<Worksheet ss:Name=\\\"\".concat(opts.sheetName, \"\\\">\"), '<Table>', columns.map(function (column) {\n    return \"<Column ss:Width=\\\"\".concat(column.renderWidth, \"\\\"/>\");\n  }).join('')].join('');\n  if (opts.isHeader) {\n    xml += \"<Row>\".concat(columns.map(function (column) {\n      return \"<Cell><Data ss:Type=\\\"String\\\">\".concat(getHeaderTitle(opts, column), \"</Data></Cell>\");\n    }).join(''), \"</Row>\");\n  }\n  datas.forEach(function (row) {\n    xml += '<Row>' + columns.map(function (column) {\n      return \"<Cell><Data ss:Type=\\\"String\\\">\".concat(row[column.id], \"</Data></Cell>\");\n    }).join('') + '</Row>';\n  });\n  if (opts.isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    footers.forEach(function (rows) {\n      xml += \"<Row>\".concat(columns.map(function (column) {\n        return \"<Cell><Data ss:Type=\\\"String\\\">\".concat(getFooterCellValue($xetable, opts, rows, column), \"</Data></Cell>\");\n      }).join(''), \"</Row>\");\n    });\n  }\n  return \"\".concat(xml, \"</Table></Worksheet></Workbook>\");\n}\nfunction getContent($xetable, opts, columns, datas) {\n  if (columns.length) {\n    switch (opts.type) {\n      case 'csv':\n        return toCsv($xetable, opts, columns, datas);\n      case 'txt':\n        return toTxt($xetable, opts, columns, datas);\n      case 'html':\n        return toHtml($xetable, opts, columns, datas);\n      case 'xml':\n        return toXML($xetable, opts, columns, datas);\n    }\n  }\n  return '';\n}\n\n/**\r\n * 保存文件到本地\r\n * @param {*} options 参数\r\n */\nfunction saveLocalFile(options) {\n  var filename = options.filename,\n    type = options.type,\n    content = options.content;\n  var name = \"\".concat(filename, \".\").concat(type);\n  if (window.Blob) {\n    var blob = content instanceof Blob ? content : getExportBlobByContent(_xeUtils.default.toValueString(content), options);\n    if (navigator.msSaveBlob) {\n      navigator.msSaveBlob(blob, name);\n    } else {\n      var url = URL.createObjectURL(blob);\n      var linkElem = document.createElement('a');\n      linkElem.target = '_blank';\n      linkElem.download = name;\n      linkElem.href = url;\n      document.body.appendChild(linkElem);\n      linkElem.click();\n      document.body.removeChild(linkElem);\n      requestAnimationFrame(function () {\n        if (linkElem.parentNode) {\n          linkElem.parentNode.removeChild(linkElem);\n        }\n        URL.revokeObjectURL(url);\n      });\n    }\n    return Promise.resolve();\n  }\n  return Promise.reject(new Error((0, _log.getLog)('vxe.error.notExp')));\n}\nfunction downloadFile($xetable, opts, content) {\n  var filename = opts.filename,\n    type = opts.type,\n    download = opts.download;\n  if (!download) {\n    var blob = getExportBlobByContent(content, opts);\n    return Promise.resolve({\n      type: type,\n      content: content,\n      blob: blob\n    });\n  }\n  saveLocalFile({\n    filename: filename,\n    type: type,\n    content: content\n  }).then(function () {\n    if (opts.message !== false) {\n      // 检测弹窗模块\n      if (process.env.NODE_ENV === 'development') {\n        if (!_vXETable.default.modal) {\n          (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n        }\n      }\n      _vXETable.default.modal.message({\n        content: _conf.default.i18n('vxe.table.expSuccess'),\n        status: 'success'\n      });\n    }\n  });\n}\nfunction clearColumnConvert(columns) {\n  _xeUtils.default.eachTree(columns, function (column) {\n    delete column._level;\n    delete column._colSpan;\n    delete column._rowSpan;\n    delete column._children;\n    delete column.childNodes;\n  }, {\n    children: 'children'\n  });\n}\nfunction handleExport($xetable, opts) {\n  var remote = opts.remote,\n    columns = opts.columns,\n    colgroups = opts.colgroups,\n    exportMethod = opts.exportMethod,\n    afterExportMethod = opts.afterExportMethod;\n  return new Promise(function (resolve) {\n    if (remote) {\n      var params = {\n        options: opts,\n        $table: $xetable,\n        $grid: $xetable.$xegrid\n      };\n      resolve(exportMethod ? exportMethod(params) : params);\n    } else {\n      var datas = getExportData($xetable, opts);\n      resolve($xetable.preventEvent(null, 'event.export', {\n        options: opts,\n        columns: columns,\n        colgroups: colgroups,\n        datas: datas\n      }, function () {\n        return downloadFile($xetable, opts, getContent($xetable, opts, columns, datas));\n      }));\n    }\n  }).then(function (params) {\n    clearColumnConvert(columns);\n    if (!opts.print) {\n      if (afterExportMethod) {\n        afterExportMethod({\n          status: true,\n          options: opts,\n          $table: $xetable,\n          $grid: $xetable.$xegrid\n        });\n      }\n    }\n    return Object.assign({\n      status: true\n    }, params);\n  }).catch(function () {\n    clearColumnConvert(columns);\n    if (!opts.print) {\n      if (afterExportMethod) {\n        afterExportMethod({\n          status: false,\n          options: opts,\n          $table: $xetable,\n          $grid: $xetable.$xegrid\n        });\n      }\n    }\n    var params = {\n      status: false\n    };\n    return Promise.reject(params);\n  });\n}\nfunction getElementsByTagName(elem, qualifiedName) {\n  return elem.getElementsByTagName(qualifiedName);\n}\nfunction getTxtCellKey(now) {\n  return \"#\".concat(now, \"@\").concat(_xeUtils.default.uniqueId());\n}\nfunction replaceTxtCell(cell, vMaps) {\n  return cell.replace(/#\\d+@\\d+/g, function (key) {\n    return _xeUtils.default.hasOwnProp(vMaps, key) ? vMaps[key] : key;\n  });\n}\nfunction getTxtCellValue(val, vMaps) {\n  var rest = replaceTxtCell(val, vMaps);\n  return rest.replace(/^\"+$/g, function (qVal) {\n    return '\"'.repeat(Math.ceil(qVal.length / 2));\n  });\n}\nfunction parseCsvAndTxt(columns, content, cellSeparator) {\n  var list = content.split(enterSymbol);\n  var rows = [];\n  var fields = [];\n  if (list.length) {\n    var vMaps = {};\n    var now = Date.now();\n    list.forEach(function (rVal) {\n      if (rVal) {\n        var item = {};\n        rVal = rVal.replace(/(\"\")|(\\n)/g, function (text, dVal) {\n          var key = getTxtCellKey(now);\n          vMaps[key] = dVal ? '\"' : '\\n';\n          return key;\n        }).replace(/\"(.*?)\"/g, function (text, cVal) {\n          var key = getTxtCellKey(now);\n          vMaps[key] = replaceTxtCell(cVal, vMaps);\n          return key;\n        });\n        var cells = rVal.split(cellSeparator);\n        if (!fields.length) {\n          fields = cells.map(function (val) {\n            return getTxtCellValue(val.trim(), vMaps);\n          });\n        } else {\n          cells.forEach(function (val, colIndex) {\n            if (colIndex < fields.length) {\n              item[fields[colIndex]] = getTxtCellValue(val, vMaps);\n            }\n          });\n          rows.push(item);\n        }\n      }\n    });\n  }\n  return {\n    fields: fields,\n    rows: rows\n  };\n}\nfunction parseCsv(columns, content) {\n  return parseCsvAndTxt(columns, content, ',');\n}\nfunction parseTxt(columns, content) {\n  return parseCsvAndTxt(columns, content, '\\t');\n}\nfunction parseHTML(columns, content) {\n  var domParser = new DOMParser();\n  var xmlDoc = domParser.parseFromString(content, 'text/html');\n  var bodyNodes = getElementsByTagName(xmlDoc, 'body');\n  var rows = [];\n  var fields = [];\n  if (bodyNodes.length) {\n    var tableNodes = getElementsByTagName(bodyNodes[0], 'table');\n    if (tableNodes.length) {\n      var theadNodes = getElementsByTagName(tableNodes[0], 'thead');\n      if (theadNodes.length) {\n        _xeUtils.default.arrayEach(getElementsByTagName(theadNodes[0], 'tr'), function (rowNode) {\n          _xeUtils.default.arrayEach(getElementsByTagName(rowNode, 'th'), function (cellNode) {\n            fields.push(cellNode.textContent);\n          });\n        });\n        var tbodyNodes = getElementsByTagName(tableNodes[0], 'tbody');\n        if (tbodyNodes.length) {\n          _xeUtils.default.arrayEach(getElementsByTagName(tbodyNodes[0], 'tr'), function (rowNode) {\n            var item = {};\n            _xeUtils.default.arrayEach(getElementsByTagName(rowNode, 'td'), function (cellNode, colIndex) {\n              if (fields[colIndex]) {\n                item[fields[colIndex]] = cellNode.textContent || '';\n              }\n            });\n            rows.push(item);\n          });\n        }\n      }\n    }\n  }\n  return {\n    fields: fields,\n    rows: rows\n  };\n}\nfunction parseXML(columns, content) {\n  var domParser = new DOMParser();\n  var xmlDoc = domParser.parseFromString(content, 'application/xml');\n  var sheetNodes = getElementsByTagName(xmlDoc, 'Worksheet');\n  var rows = [];\n  var fields = [];\n  if (sheetNodes.length) {\n    var tableNodes = getElementsByTagName(sheetNodes[0], 'Table');\n    if (tableNodes.length) {\n      var rowNodes = getElementsByTagName(tableNodes[0], 'Row');\n      if (rowNodes.length) {\n        _xeUtils.default.arrayEach(getElementsByTagName(rowNodes[0], 'Cell'), function (cellNode) {\n          fields.push(cellNode.textContent);\n        });\n        _xeUtils.default.arrayEach(rowNodes, function (rowNode, index) {\n          if (index) {\n            var item = {};\n            var cellNodes = getElementsByTagName(rowNode, 'Cell');\n            _xeUtils.default.arrayEach(cellNodes, function (cellNode, colIndex) {\n              if (fields[colIndex]) {\n                item[fields[colIndex]] = cellNode.textContent;\n              }\n            });\n            rows.push(item);\n          }\n        });\n      }\n    }\n  }\n  return {\n    fields: fields,\n    rows: rows\n  };\n}\n\n/**\r\n * 检查导入的列是否完整\r\n * @param {Array} fields 字段名列表\r\n * @param {Array} rows 数据列表\r\n */\nfunction checkImportData(columns, fields) {\n  var tableFields = [];\n  columns.forEach(function (column) {\n    var field = column.property;\n    if (field) {\n      tableFields.push(field);\n    }\n  });\n  return fields.some(function (field) {\n    return tableFields.indexOf(field) > -1;\n  });\n}\nfunction handleImport($xetable, content, opts) {\n  var tableFullColumn = $xetable.tableFullColumn,\n    _importResolve = $xetable._importResolve,\n    _importReject = $xetable._importReject;\n  var rest = {\n    fields: [],\n    rows: []\n  };\n  switch (opts.type) {\n    case 'csv':\n      rest = parseCsv(tableFullColumn, content);\n      break;\n    case 'txt':\n      rest = parseTxt(tableFullColumn, content);\n      break;\n    case 'html':\n      rest = parseHTML(tableFullColumn, content);\n      break;\n    case 'xml':\n      rest = parseXML(tableFullColumn, content);\n      break;\n  }\n  var _rest = rest,\n    fields = _rest.fields,\n    rows = _rest.rows;\n  var status = checkImportData(tableFullColumn, fields);\n  if (status) {\n    $xetable.createData(rows).then(function (data) {\n      var loadRest;\n      if (opts.mode === 'insert') {\n        loadRest = $xetable.insert(data);\n      } else {\n        loadRest = $xetable.reloadData(data);\n      }\n      if (opts.message !== false) {\n        // 检测弹窗模块\n        if (process.env.NODE_ENV === 'development') {\n          if (!_vXETable.default.modal) {\n            (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n          }\n        }\n        _vXETable.default.modal.message({\n          content: _conf.default.i18n('vxe.table.impSuccess', [rows.length]),\n          status: 'success'\n        });\n      }\n      return loadRest.then(function () {\n        if (_importResolve) {\n          _importResolve({\n            status: true\n          });\n        }\n      });\n    });\n  } else if (opts.message !== false) {\n    // 检测弹窗模块\n    if (process.env.NODE_ENV === 'development') {\n      if (!_vXETable.default.modal) {\n        (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n      }\n    }\n    _vXETable.default.modal.message({\n      content: _conf.default.i18n('vxe.error.impFields'),\n      status: 'error'\n    });\n    if (_importReject) {\n      _importReject({\n        status: false\n      });\n    }\n  }\n}\nfunction handleFileImport($xetable, file, opts) {\n  var importMethod = opts.importMethod,\n    afterImportMethod = opts.afterImportMethod;\n  var _UtilTools$parseFile = _utils.default.parseFile(file),\n    type = _UtilTools$parseFile.type,\n    filename = _UtilTools$parseFile.filename;\n\n  // 检查类型，如果为自定义导出，则不需要校验类型\n  if (!importMethod && !_xeUtils.default.includes(_vXETable.default.config.importTypes, type)) {\n    if (opts.message !== false) {\n      // 检测弹窗模块\n      if (process.env.NODE_ENV === 'development') {\n        if (!_vXETable.default.modal) {\n          (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n        }\n      }\n      _vXETable.default.modal.message({\n        content: _conf.default.i18n('vxe.error.notType', [type]),\n        status: 'error'\n      });\n    }\n    var params = {\n      status: false\n    };\n    return Promise.reject(params);\n  }\n  var rest = new Promise(function (resolve, reject) {\n    var _importResolve = function _importResolve(params) {\n      resolve(params);\n      $xetable._importResolve = null;\n      $xetable._importReject = null;\n    };\n    var _importReject = function _importReject(params) {\n      reject(params);\n      $xetable._importResolve = null;\n      $xetable._importReject = null;\n    };\n    $xetable._importResolve = _importResolve;\n    $xetable._importReject = _importReject;\n    if (window.FileReader) {\n      var options = Object.assign({\n        mode: 'insert'\n      }, opts, {\n        type: type,\n        filename: filename\n      });\n      if (options.remote) {\n        if (importMethod) {\n          Promise.resolve(importMethod({\n            file: file,\n            options: options,\n            $table: $xetable\n          })).then(function () {\n            _importResolve({\n              status: true\n            });\n          }).catch(function () {\n            _importResolve({\n              status: true\n            });\n          });\n        } else {\n          _importResolve({\n            status: true\n          });\n        }\n      } else {\n        $xetable.preventEvent(null, 'event.import', {\n          file: file,\n          options: options,\n          columns: $xetable.tableFullColumn\n        }, function () {\n          var reader = new FileReader();\n          reader.onerror = function () {\n            (0, _log.errLog)('vxe.error.notType', [type]);\n            _importReject({\n              status: false\n            });\n          };\n          reader.onload = function (e) {\n            handleImport($xetable, e.target.result, options);\n          };\n          reader.readAsText(file, options.encoding || 'UTF-8');\n        });\n      }\n    } else {\n      // 不支持的浏览器\n      if (process.env.NODE_ENV === 'development') {\n        (0, _log.errLog)('vxe.error.notExp');\n      }\n      _importResolve({\n        status: true\n      });\n    }\n  });\n  return rest.then(function () {\n    if (afterImportMethod) {\n      afterImportMethod({\n        status: true,\n        options: opts,\n        $table: $xetable\n      });\n    }\n  }).catch(function (e) {\n    if (afterImportMethod) {\n      afterImportMethod({\n        status: false,\n        options: opts,\n        $table: $xetable\n      });\n    }\n    return Promise.reject(e);\n  });\n}\n\n/**\r\n * 读取本地文件\r\n * @param {*} options 参数\r\n */\nfunction readLocalFile() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (!fileForm) {\n    fileForm = document.createElement('form');\n    fileInput = document.createElement('input');\n    fileForm.className = 'vxe-table--file-form';\n    fileInput.name = 'file';\n    fileInput.type = 'file';\n    fileForm.appendChild(fileInput);\n    document.body.appendChild(fileForm);\n  }\n  return new Promise(function (resolve, reject) {\n    var types = options.types || [];\n    var isAllType = !types.length || types.some(function (type) {\n      return type === '*';\n    });\n    fileInput.multiple = !!options.multiple;\n    fileInput.accept = isAllType ? '' : \".\".concat(types.join(', .'));\n    fileInput.onchange = function (evnt) {\n      var files = evnt.target.files;\n      var file = files[0];\n      var errType;\n      // 校验类型\n      if (!isAllType) {\n        for (var fIndex = 0; fIndex < files.length; fIndex++) {\n          var _UtilTools$parseFile2 = _utils.default.parseFile(files[fIndex]),\n            type = _UtilTools$parseFile2.type;\n          if (!_xeUtils.default.includes(types, type)) {\n            errType = type;\n            break;\n          }\n        }\n      }\n      if (!errType) {\n        resolve({\n          status: true,\n          files: files,\n          file: file\n        });\n      } else {\n        if (options.message !== false) {\n          // 检测弹窗模块\n          if (process.env.NODE_ENV === 'development') {\n            if (!_vXETable.default.modal) {\n              (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n            }\n          }\n          _vXETable.default.modal.message({\n            content: _conf.default.i18n('vxe.error.notType', [errType]),\n            status: 'error'\n          });\n        }\n        var params = {\n          status: false,\n          files: files,\n          file: file\n        };\n        reject(params);\n      }\n    };\n    fileForm.reset();\n    fileInput.click();\n  });\n}\nfunction removePrintFrame() {\n  if (printFrame) {\n    if (printFrame.parentNode) {\n      try {\n        printFrame.contentDocument.write('');\n      } catch (e) {}\n      printFrame.parentNode.removeChild(printFrame);\n    }\n    printFrame = null;\n  }\n}\nfunction appendPrintFrame() {\n  if (!printFrame.parentNode) {\n    document.body.appendChild(printFrame);\n  }\n}\nfunction afterPrintEvent() {\n  requestAnimationFrame(removePrintFrame);\n}\nfunction handlePrint($xetable, opts, content) {\n  var beforePrintMethod = opts.beforePrintMethod;\n  if (beforePrintMethod) {\n    content = beforePrintMethod({\n      content: content,\n      options: opts,\n      $table: $xetable\n    }) || '';\n  }\n  content = createHtmlPage(opts, content);\n  var blob = getExportBlobByContent(content, opts);\n  if (_dom.browse.msie) {\n    removePrintFrame();\n    printFrame = createFrame();\n    appendPrintFrame();\n    printFrame.contentDocument.write(content);\n    printFrame.contentDocument.execCommand('print');\n  } else {\n    if (!printFrame) {\n      printFrame = createFrame();\n      printFrame.onload = function (evnt) {\n        if (evnt.target.src) {\n          evnt.target.contentWindow.onafterprint = afterPrintEvent;\n          evnt.target.contentWindow.print();\n        }\n      };\n    }\n    appendPrintFrame();\n    printFrame.src = URL.createObjectURL(blob);\n  }\n}\nfunction handleExportAndPrint($xetable, options, isPrint) {\n  var initStore = $xetable.initStore,\n    customOpts = $xetable.customOpts,\n    collectColumn = $xetable.collectColumn,\n    footerTableData = $xetable.footerTableData,\n    treeConfig = $xetable.treeConfig,\n    mergeList = $xetable.mergeList,\n    isGroup = $xetable.isGroup,\n    exportParams = $xetable.exportParams;\n  var selectRecords = $xetable.getCheckboxRecords();\n  var hasFooter = !!footerTableData.length;\n  var hasTree = treeConfig;\n  var hasMerge = !hasTree && mergeList.length;\n  var defOpts = Object.assign({\n    message: true,\n    isHeader: true\n  }, options);\n  var types = defOpts.types || _vXETable.default.config.exportTypes;\n  var modes = defOpts.modes;\n  var checkMethod = customOpts.checkMethod;\n  var exportColumns = collectColumn.slice(0);\n  var columns = defOpts.columns;\n  // 处理类型\n  var typeList = types.map(function (value) {\n    return {\n      value: value,\n      label: \"vxe.export.types.\".concat(value)\n    };\n  });\n  var modeList = modes.map(function (value) {\n    return {\n      value: value,\n      label: \"vxe.export.modes.\".concat(value)\n    };\n  });\n  // 默认选中\n  _xeUtils.default.eachTree(exportColumns, function (column, index, items, path, parent) {\n    var isColGroup = column.children && column.children.length;\n    if (isColGroup || defaultFilterExportColumn(column)) {\n      column.checked = columns ? columns.some(function (item) {\n        if ((0, _util.isColumnInfo)(item)) {\n          return column === item;\n        } else if (_xeUtils.default.isString(item)) {\n          return column.field === item;\n        } else {\n          var colid = item.id || item.colId;\n          var type = item.type;\n          var field = item.property || item.field;\n          if (colid) {\n            return column.id === colid;\n          } else if (field && type) {\n            return column.property === field && column.type === type;\n          } else if (field) {\n            return column.property === field;\n          } else if (type) {\n            return column.type === type;\n          }\n        }\n        return false;\n      }) : column.visible;\n      column.halfChecked = false;\n      column.disabled = parent && parent.disabled || (checkMethod ? !checkMethod({\n        column: column\n      }) : false);\n    }\n  });\n  // 更新条件\n  Object.assign($xetable.exportStore, {\n    columns: exportColumns,\n    typeList: typeList,\n    modeList: modeList,\n    hasFooter: hasFooter,\n    hasMerge: hasMerge,\n    hasTree: hasTree,\n    isPrint: isPrint,\n    hasColgroup: isGroup,\n    visible: true\n  });\n  // 默认参数\n  if (!initStore.export) {\n    Object.assign(exportParams, {\n      mode: selectRecords.length ? 'selected' : 'current'\n    }, defOpts);\n  }\n  if (modes.indexOf(exportParams.mode) === -1) {\n    exportParams.mode = modes[0];\n  }\n  if (types.indexOf(exportParams.type) === -1) {\n    exportParams.type = types[0];\n  }\n  initStore.export = true;\n  return $xetable.$nextTick();\n}\nvar getConvertColumns = function getConvertColumns(columns) {\n  var result = [];\n  columns.forEach(function (column) {\n    if (column.childNodes && column.childNodes.length) {\n      result.push(column);\n      result.push.apply(result, _toConsumableArray(getConvertColumns(column.childNodes)));\n    } else {\n      result.push(column);\n    }\n  });\n  return result;\n};\nvar convertToRows = function convertToRows(originColumns) {\n  var maxLevel = 1;\n  var traverse = function traverse(column, parent) {\n    if (parent) {\n      column._level = parent._level + 1;\n      if (maxLevel < column._level) {\n        maxLevel = column._level;\n      }\n    }\n    if (column.childNodes && column.childNodes.length) {\n      var colSpan = 0;\n      column.childNodes.forEach(function (subColumn) {\n        traverse(subColumn, column);\n        colSpan += subColumn._colSpan;\n      });\n      column._colSpan = colSpan;\n    } else {\n      column._colSpan = 1;\n    }\n  };\n  originColumns.forEach(function (column) {\n    column._level = 1;\n    traverse(column);\n  });\n  var rows = [];\n  for (var i = 0; i < maxLevel; i++) {\n    rows.push([]);\n  }\n  var allColumns = getConvertColumns(originColumns);\n  allColumns.forEach(function (column) {\n    if (column.childNodes && column.childNodes.length) {\n      column._rowSpan = 1;\n    } else {\n      column._rowSpan = maxLevel - column._level + 1;\n    }\n    rows[column._level - 1].push(column);\n  });\n  return rows;\n};\nvar _default = {\n  methods: {\n    /**\r\n     * 导出文件，支持 csv/html/xml/txt\r\n     * 如果是树表格，则默认是导出所有节点\r\n     * 如果是启用了虚拟滚动，则只能导出数据源，可以配合 dataFilterMethod 函数自行转换数据\r\n     * @param {Object} options 参数\r\n     */\n    _exportData: function _exportData(options) {\n      var _this = this;\n      var $xegrid = this.$xegrid,\n        isGroup = this.isGroup,\n        tableGroupColumn = this.tableGroupColumn,\n        tableFullColumn = this.tableFullColumn,\n        afterFullData = this.afterFullData,\n        treeConfig = this.treeConfig,\n        treeOpts = this.treeOpts,\n        exportOpts = this.exportOpts;\n      var opts = Object.assign({\n        // filename: '',\n        // sheetName: '',\n        // original: false,\n        // message: false,\n        isHeader: true,\n        isFooter: true,\n        isColgroup: true,\n        isMerge: false,\n        isAllExpand: false,\n        download: true,\n        type: 'csv',\n        mode: 'current'\n        // data: null,\n        // remote: false,\n        // dataFilterMethod: null,\n        // footerFilterMethod: null,\n        // exportMethod: null,\n        // columnFilterMethod: null,\n        // beforeExportMethod: null,\n        // afterExportMethod: null\n      }, exportOpts, {\n        print: false\n      }, options);\n      var type = opts.type,\n        mode = opts.mode,\n        columns = opts.columns,\n        original = opts.original,\n        beforeExportMethod = opts.beforeExportMethod;\n      var groups = [];\n      var customCols = columns && columns.length ? columns : null;\n      // 如果设置源数据，则默认导出设置了字段的列\n      var columnFilterMethod = opts.columnFilterMethod;\n      if (!customCols && !columnFilterMethod) {\n        columnFilterMethod = original ? function (_ref) {\n          var column = _ref.column;\n          return column.property;\n        } : function (_ref2) {\n          var column = _ref2.column;\n          return defaultFilterExportColumn(column);\n        };\n      }\n      if (customCols) {\n        groups = _xeUtils.default.searchTree(_xeUtils.default.mapTree(customCols, function (item) {\n          var targetColumn;\n          if (item) {\n            if ((0, _util.isColumnInfo)(item)) {\n              targetColumn = item;\n            } else if (_xeUtils.default.isString(item)) {\n              targetColumn = _this.getColumnByField(item);\n            } else {\n              var colid = item.id || item.colId;\n              var _type = item.type;\n              var field = item.property || item.field;\n              if (colid) {\n                targetColumn = _this.getColumnById(colid);\n              } else if (field && _type) {\n                targetColumn = tableFullColumn.find(function (column) {\n                  return column.property === field && column.type === _type;\n                });\n              } else if (field) {\n                targetColumn = _this.getColumnByField(field);\n              } else if (_type) {\n                targetColumn = tableFullColumn.find(function (column) {\n                  return column.type === _type;\n                });\n              }\n            }\n            return targetColumn || {};\n          }\n        }, {\n          children: 'childNodes',\n          mapChildren: '_children'\n        }), function (column, index) {\n          return (0, _util.isColumnInfo)(column) && (!columnFilterMethod || columnFilterMethod({\n            column: column,\n            $columnIndex: index\n          }));\n        }, {\n          children: '_children',\n          mapChildren: 'childNodes',\n          original: true\n        });\n      } else {\n        groups = _xeUtils.default.searchTree(isGroup ? tableGroupColumn : tableFullColumn, function (column, index) {\n          return column.visible && (!columnFilterMethod || columnFilterMethod({\n            column: column,\n            $columnIndex: index\n          }));\n        }, {\n          children: 'children',\n          mapChildren: 'childNodes',\n          original: true\n        });\n      }\n      // 获取所有列\n      var cols = [];\n      _xeUtils.default.eachTree(groups, function (column) {\n        var isColGroup = column.children && column.children.length;\n        if (!isColGroup) {\n          cols.push(column);\n        }\n      }, {\n        children: 'childNodes'\n      });\n      // 构建分组层级\n      opts.columns = cols;\n      opts.colgroups = convertToRows(groups);\n      if (!opts.filename) {\n        opts.filename = _conf.default.i18n(opts.original ? 'vxe.table.expOriginFilename' : 'vxe.table.expFilename', [_xeUtils.default.toDateString(Date.now(), 'yyyyMMddHHmmss')]);\n      }\n      if (!opts.sheetName) {\n        opts.sheetName = document.title;\n      }\n\n      // 检查类型，如果为自定义导出，则不需要校验类型\n      if (!opts.exportMethod && !_xeUtils.default.includes(_vXETable.default.config.exportTypes, type)) {\n        if (process.env.NODE_ENV === 'development') {\n          (0, _log.errLog)('vxe.error.notType', [type]);\n        }\n        var params = {\n          status: false\n        };\n        return Promise.reject(params);\n      }\n      if (!opts.print) {\n        if (beforeExportMethod) {\n          beforeExportMethod({\n            options: opts,\n            $table: this,\n            $grid: $xegrid\n          });\n        }\n      }\n      if (!opts.data) {\n        opts.data = afterFullData;\n        if (mode === 'selected') {\n          var selectRecords = this.getCheckboxRecords();\n          if (['html', 'pdf'].indexOf(type) > -1 && treeConfig) {\n            opts.data = _xeUtils.default.searchTree(this.getTableData().fullData, function (item) {\n              return selectRecords.indexOf(item) > -1;\n            }, Object.assign({}, treeOpts, {\n              data: '_row'\n            }));\n          } else {\n            opts.data = selectRecords;\n          }\n        } else if (mode === 'all') {\n          if (process.env.NODE_ENV === 'development') {\n            if (!$xegrid) {\n              (0, _log.warnLog)('vxe.error.errProp', ['all', 'mode=current,selected']);\n            }\n          }\n          if ($xegrid && !opts.remote) {\n            var _$xegrid$proxyOpts = $xegrid.proxyOpts,\n              beforeQueryAll = _$xegrid$proxyOpts.beforeQueryAll,\n              afterQueryAll = _$xegrid$proxyOpts.afterQueryAll,\n              _$xegrid$proxyOpts$aj = _$xegrid$proxyOpts.ajax,\n              ajax = _$xegrid$proxyOpts$aj === void 0 ? {} : _$xegrid$proxyOpts$aj,\n              _$xegrid$proxyOpts$pr = _$xegrid$proxyOpts.props,\n              props = _$xegrid$proxyOpts$pr === void 0 ? {} : _$xegrid$proxyOpts$pr;\n            var ajaxMethods = ajax.queryAll;\n            if (process.env.NODE_ENV === 'development') {\n              if (!ajaxMethods) {\n                (0, _log.warnLog)('vxe.error.notFunc', ['proxy-config.ajax.queryAll']);\n              }\n            }\n            if (ajaxMethods) {\n              var _params = {\n                $table: this,\n                $grid: $xegrid,\n                sort: $xegrid.sortData,\n                filters: $xegrid.filterData,\n                form: $xegrid.formData,\n                target: ajaxMethods,\n                options: opts\n              };\n              return Promise.resolve((beforeQueryAll || ajaxMethods)(_params)).catch(function (e) {\n                return e;\n              }).then(function (rest) {\n                opts.data = (props.list ? _xeUtils.default.get(rest, props.list) : rest) || [];\n                if (afterQueryAll) {\n                  afterQueryAll(_params);\n                }\n                return handleExport(_this, opts);\n              });\n            }\n          }\n        }\n      }\n      return handleExport(this, opts);\n    },\n    _importByFile: function _importByFile(file, options) {\n      var opts = Object.assign({}, options);\n      var beforeImportMethod = opts.beforeImportMethod;\n      if (beforeImportMethod) {\n        beforeImportMethod({\n          options: opts,\n          $table: this\n        });\n      }\n      return handleFileImport(this, file, opts);\n    },\n    _importData: function _importData(options) {\n      var _this2 = this;\n      var opts = Object.assign({\n        types: _vXETable.default.config.importTypes\n        // beforeImportMethod: null,\n        // afterImportMethod: null\n      }, this.importOpts, options);\n      var beforeImportMethod = opts.beforeImportMethod,\n        afterImportMethod = opts.afterImportMethod;\n      if (beforeImportMethod) {\n        beforeImportMethod({\n          options: opts,\n          $table: this\n        });\n      }\n      return readLocalFile(opts).catch(function (e) {\n        if (afterImportMethod) {\n          afterImportMethod({\n            status: false,\n            options: opts,\n            $table: _this2\n          });\n        }\n        return Promise.reject(e);\n      }).then(function (params) {\n        var file = params.file;\n        return handleFileImport(_this2, file, opts);\n      });\n    },\n    _saveFile: function _saveFile(options) {\n      return saveLocalFile(options);\n    },\n    _readFile: function _readFile(options) {\n      return readLocalFile(options);\n    },\n    _print: function _print(options) {\n      var _this3 = this;\n      var opts = Object.assign({\n        original: false\n        // beforePrintMethod\n      }, this.printOpts, options, {\n        type: 'html',\n        download: false,\n        remote: false,\n        print: true\n      });\n      if (!opts.sheetName) {\n        opts.sheetName = document.title;\n      }\n      return new Promise(function (resolve) {\n        if (opts.content) {\n          resolve(handlePrint(_this3, opts, opts.content));\n        } else {\n          resolve(_this3.exportData(opts).then(function (_ref3) {\n            var content = _ref3.content;\n            return handlePrint(_this3, opts, content);\n          }));\n        }\n      });\n    },\n    _openImport: function _openImport(options) {\n      var defOpts = Object.assign({\n        mode: 'insert',\n        message: true,\n        types: _vXETable.default.config.importTypes\n      }, options, this.importOpts);\n      var types = defOpts.types;\n      var isTree = !!this.getTreeStatus();\n      if (isTree) {\n        if (defOpts.message) {\n          _vXETable.default.modal.message({\n            content: _conf.default.i18n('vxe.error.treeNotImp'),\n            status: 'error'\n          });\n        }\n        return;\n      }\n      if (!this.importConfig) {\n        (0, _log.errLog)('vxe.error.reqProp', ['import-config']);\n      }\n      // 处理类型\n      var typeList = types.map(function (value) {\n        return {\n          value: value,\n          label: \"vxe.export.types.\".concat(value)\n        };\n      });\n      var modeList = defOpts.modes.map(function (value) {\n        return {\n          value: value,\n          label: \"vxe.import.modes.\".concat(value)\n        };\n      });\n      Object.assign(this.importStore, {\n        file: null,\n        type: '',\n        filename: '',\n        modeList: modeList,\n        typeList: typeList,\n        visible: true\n      });\n      Object.assign(this.importParams, defOpts);\n      this.initStore.import = true;\n    },\n    _openExport: function _openExport(options) {\n      var exportOpts = this.exportOpts;\n      if (process.env.NODE_ENV === 'development') {\n        if (!this.exportConfig) {\n          (0, _log.errLog)('vxe.error.reqProp', ['export-config']);\n        }\n      }\n      return handleExportAndPrint(this, Object.assign({}, exportOpts, options));\n    },\n    _openPrint: function _openPrint(options) {\n      var printOpts = this.printOpts;\n      if (process.env.NODE_ENV === 'development') {\n        if (!this.printConfig) {\n          (0, _log.errLog)('vxe.error.reqProp', ['print-config']);\n        }\n      }\n      return handleExportAndPrint(this, Object.assign({}, printOpts, options), true);\n    }\n  }\n};\nexports.default = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","handlePrint","readLocalFile","saveLocalFile","_xeUtils","_interopRequireDefault","require","_conf","_vXETable","_utils","_util","_dom","_log","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","formatText","defaultHtmlStyle","htmlCellElem","fileForm","fileInput","printFrame","csvBOM","enterSymbol","createFrame","frame","document","createElement","className","getExportBlobByContent","content","options","window","Blob","type","concat","hasTreeChildren","$xetable","row","treeOpts","children","getSeq","$rowIndex","column","$columnIndex","seqOpts","seqMethod","rowIndex","getRowIndex","columnIndex","getColumnIndex","getRowSeq","defaultFilterExportColumn","property","indexOf","toTableBorder","border","toBooleanValue","cellValue","isBoolean","getLabelData","opts","columns","datas","isAllExpand","mode","treeConfig","radioOpts","checkboxOpts","rest","expandMaps","Map","eachTree","item","items","path","parent","nodes","_row","parentRow","has","isTreeExpandByRow","hasRowChild","_item","_level","_hasChild","_expand","forEach","renderOpts","editRender","cellRender","exportLabelMethod","exportMethod","compConf","renderer","get","cellExportMethod","$table","map","num","Number","join","isCheckedByCheckboxRow","_checkboxLabel","labelField","_checkboxDisabled","checkMethod","isCheckedByRadioRow","_radioLabel","_radioDisabled","original","getCellValue","getCellLabel","innerHTML","innerText","trim","cell","getCell","id","toValueString","set","push","assign","getExportData","dataFilterMethod","data","filter","index","getBooleanValue","getHeaderTitle","getTitle","getFooterCellValue","footerExportMethod","footerCellExportMethod","_columnIndex","getVTColumnIndex","itemIndex","getFooterData","footerTableData","footerFilterMethod","getCsvCellTypeLabel","cellType","isNaN","toTxtCellLabel","val","replace","toCsv","isHeader","isFooter","footers","rows","toTxt","hasEllipsis","allColumnOverflow","columnOverflow","headOverflow","isUndefined","isNull","showEllipsis","showTitle","showTooltip","isEllipsis","scrollXLoad","scrollYLoad","createHtmlPage","style","sheetName","toHtml","isAllSelected","isIndeterminate","allHeaderAlign","headerAlign","allAlign","align","allFooterAlign","footerAlign","showOverflow","allColumnHeaderOverflow","showHeaderOverflow","mergeList","isPrint","print","isColgroup","isMerge","colgroups","allCls","clss","cls","tables","renderWidth","cols","headAlign","classNames","cellTitle","childWidth","countChild","childNodes","cellWidth","_colSpan","_rowSpan","cellAlign","treeNode","treeIcon","indent","rowSpan","colSpan","_rowIndex","getVTRowIndex","spanRest","mergeBodyMethod","rowspan","colspan","footAlign","script","toXML","xml","getContent","filename","blob","navigator","msSaveBlob","url","URL","createObjectURL","linkElem","target","download","href","body","appendChild","click","removeChild","requestAnimationFrame","parentNode","revokeObjectURL","Promise","resolve","reject","Error","getLog","downloadFile","then","message","process","env","NODE_ENV","modal","errLog","i18n","status","clearColumnConvert","_children","handleExport","remote","afterExportMethod","params","$grid","$xegrid","preventEvent","catch","getElementsByTagName","elem","qualifiedName","getTxtCellKey","now","uniqueId","replaceTxtCell","vMaps","key","hasOwnProp","getTxtCellValue","qVal","repeat","Math","ceil","parseCsvAndTxt","cellSeparator","list","split","fields","Date","rVal","text","dVal","cVal","cells","colIndex","parseCsv","parseTxt","parseHTML","domParser","DOMParser","xmlDoc","parseFromString","bodyNodes","tableNodes","theadNodes","arrayEach","rowNode","cellNode","textContent","tbodyNodes","parseXML","sheetNodes","rowNodes","cellNodes","checkImportData","tableFields","field","some","handleImport","tableFullColumn","_importResolve","_importReject","_rest","createData","loadRest","insert","reloadData","handleFileImport","file","importMethod","afterImportMethod","_UtilTools$parseFile","parseFile","includes","config","importTypes","FileReader","reader","onerror","onload","e","result","readAsText","encoding","arguments","undefined","types","isAllType","multiple","accept","onchange","evnt","files","errType","fIndex","_UtilTools$parseFile2","reset","removePrintFrame","contentDocument","write","appendPrintFrame","afterPrintEvent","beforePrintMethod","browse","msie","execCommand","src","contentWindow","onafterprint","handleExportAndPrint","initStore","customOpts","collectColumn","isGroup","exportParams","selectRecords","getCheckboxRecords","hasFooter","hasTree","hasMerge","defOpts","exportTypes","modes","exportColumns","typeList","label","modeList","isColGroup","checked","isColumnInfo","isString","colid","colId","visible","halfChecked","disabled","exportStore","hasColgroup","export","$nextTick","getConvertColumns","apply","convertToRows","originColumns","maxLevel","traverse","subColumn","allColumns","_default","methods","_exportData","_this","tableGroupColumn","afterFullData","exportOpts","beforeExportMethod","groups","customCols","columnFilterMethod","_ref","_ref2","searchTree","mapTree","targetColumn","getColumnByField","_type","getColumnById","find","mapChildren","toDateString","title","getTableData","fullData","warnLog","_$xegrid$proxyOpts","proxyOpts","beforeQueryAll","afterQueryAll","_$xegrid$proxyOpts$aj","ajax","_$xegrid$proxyOpts$pr","props","ajaxMethods","queryAll","_params","sort","sortData","filters","filterData","form","formData","_importByFile","beforeImportMethod","_importData","_this2","importOpts","_saveFile","_readFile","_print","_this3","printOpts","exportData","_ref3","_openImport","isTree","getTreeStatus","importConfig","importStore","importParams","import","_openExport","exportConfig","_openPrint","printConfig"],"sources":["D:/program/LanqiaoVue/vue-demo/node_modules/vxe-table/lib/export/src/mixin.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nexports.handlePrint = handlePrint;\nexports.readLocalFile = readLocalFile;\nexports.saveLocalFile = saveLocalFile;\nvar _xeUtils = _interopRequireDefault(require(\"xe-utils\"));\nvar _conf = _interopRequireDefault(require(\"../../v-x-e-table/src/conf\"));\nvar _vXETable = _interopRequireDefault(require(\"../../v-x-e-table\"));\nvar _utils = _interopRequireDefault(require(\"../../tools/utils\"));\nvar _util = require(\"../../table/src/util\");\nvar _dom = require(\"../../tools/dom\");\nvar _log = require(\"../../tools/log\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\nvar formatText = _utils.default.formatText;\n\n// 默认导出或打印的 HTML 样式\nvar defaultHtmlStyle = 'body{margin:0;color:#333333;font-size:14px;font-family:\"Microsoft YaHei\",微软雅黑,\"MicrosoftJhengHei\",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type=\"checkbox\"]{margin:0}.vxe-table input[type=\"checkbox\"],.vxe-table input[type=\"radio\"],.vxe-table input[type=\"checkbox\"]+span,.vxe-table input[type=\"radio\"]+span{vertical-align:middle;padding-left:0.4em}';\nvar htmlCellElem;\n\n// 导入\nvar fileForm;\nvar fileInput;\n\n// 打印\nvar printFrame;\nvar csvBOM = \"\\uFEFF\";\nvar enterSymbol = '\\r\\n';\nfunction createFrame() {\n  var frame = document.createElement('iframe');\n  frame.className = 'vxe-table--print-frame';\n  return frame;\n}\nfunction getExportBlobByContent(content, options) {\n  if (window.Blob) {\n    return new Blob([content], {\n      type: \"text/\".concat(options.type, \";charset=utf-8;\")\n    });\n  }\n  return null;\n}\nfunction hasTreeChildren($xetable, row) {\n  var treeOpts = $xetable.treeOpts;\n  return row[treeOpts.children] && row[treeOpts.children].length > 0;\n}\nfunction getSeq($xetable, row, $rowIndex, column, $columnIndex) {\n  var seqOpts = $xetable.seqOpts;\n  var seqMethod = seqOpts.seqMethod || column.seqMethod;\n  if (seqMethod) {\n    return seqMethod({\n      row: row,\n      rowIndex: $xetable.getRowIndex(row),\n      $rowIndex: $rowIndex,\n      column: column,\n      columnIndex: $xetable.getColumnIndex(column),\n      $columnIndex: $columnIndex\n    });\n  }\n  return $xetable.getRowSeq(row);\n}\nfunction defaultFilterExportColumn(column) {\n  return column.property || ['seq', 'checkbox', 'radio'].indexOf(column.type) > -1;\n}\nfunction toTableBorder(border) {\n  if (border === true) {\n    return 'full';\n  }\n  if (border) {\n    return border;\n  }\n  return 'default';\n}\nfunction toBooleanValue(cellValue) {\n  return _xeUtils.default.isBoolean(cellValue) ? cellValue ? 'TRUE' : 'FALSE' : cellValue;\n}\nfunction getLabelData($xetable, opts, columns, datas) {\n  var isAllExpand = opts.isAllExpand,\n    mode = opts.mode;\n  var treeConfig = $xetable.treeConfig,\n    treeOpts = $xetable.treeOpts,\n    radioOpts = $xetable.radioOpts,\n    checkboxOpts = $xetable.checkboxOpts;\n  if (!htmlCellElem) {\n    htmlCellElem = document.createElement('div');\n  }\n  if (treeConfig) {\n    // 如果是树表格只允许导出数据源\n    var rest = [];\n    var expandMaps = new Map();\n    _xeUtils.default.eachTree(datas, function (item, $rowIndex, items, path, parent, nodes) {\n      var row = item._row || item;\n      var parentRow = parent && parent._row ? parent._row : parent;\n      if (isAllExpand || !parentRow || expandMaps.has(parentRow) && $xetable.isTreeExpandByRow(parentRow)) {\n        var hasRowChild = hasTreeChildren($xetable, row);\n        var _item = {\n          _row: row,\n          _level: nodes.length - 1,\n          _hasChild: hasRowChild,\n          _expand: hasRowChild && $xetable.isTreeExpandByRow(row)\n        };\n        columns.forEach(function (column, $columnIndex) {\n          var cellValue = '';\n          var renderOpts = column.editRender || column.cellRender;\n          var exportLabelMethod = column.exportMethod;\n          if (!exportLabelMethod && renderOpts && renderOpts.name) {\n            var compConf = _vXETable.default.renderer.get(renderOpts.name);\n            if (compConf) {\n              exportLabelMethod = compConf.exportMethod || compConf.cellExportMethod;\n            }\n          }\n          if (exportLabelMethod) {\n            cellValue = exportLabelMethod({\n              $table: $xetable,\n              row: row,\n              column: column,\n              options: opts\n            });\n          } else {\n            switch (column.type) {\n              case 'seq':\n                cellValue = mode === 'all' ? path.map(function (num, i) {\n                  return i % 2 === 0 ? Number(num) + 1 : '.';\n                }).join('') : getSeq($xetable, row, $rowIndex, column, $columnIndex);\n                break;\n              case 'checkbox':\n                cellValue = toBooleanValue($xetable.isCheckedByCheckboxRow(row));\n                _item._checkboxLabel = checkboxOpts.labelField ? _xeUtils.default.get(row, checkboxOpts.labelField) : '';\n                _item._checkboxDisabled = checkboxOpts.checkMethod && !checkboxOpts.checkMethod({\n                  row: row\n                });\n                break;\n              case 'radio':\n                cellValue = toBooleanValue($xetable.isCheckedByRadioRow(row));\n                _item._radioLabel = radioOpts.labelField ? _xeUtils.default.get(row, radioOpts.labelField) : '';\n                _item._radioDisabled = radioOpts.checkMethod && !radioOpts.checkMethod({\n                  row: row\n                });\n                break;\n              default:\n                if (opts.original) {\n                  cellValue = _utils.default.getCellValue(row, column);\n                } else {\n                  cellValue = $xetable.getCellLabel(row, column);\n                  if (column.type === 'html') {\n                    htmlCellElem.innerHTML = cellValue;\n                    cellValue = htmlCellElem.innerText.trim();\n                  } else {\n                    var cell = $xetable.getCell(row, column);\n                    if (cell) {\n                      cellValue = cell.innerText.trim();\n                    }\n                  }\n                }\n            }\n          }\n          _item[column.id] = _xeUtils.default.toValueString(cellValue);\n        });\n        expandMaps.set(row, 1);\n        rest.push(Object.assign(_item, row));\n      }\n    }, treeOpts);\n    return rest;\n  }\n  return datas.map(function (row, $rowIndex) {\n    var item = {\n      _row: row\n    };\n    columns.forEach(function (column, $columnIndex) {\n      var cellValue = '';\n      var renderOpts = column.editRender || column.cellRender;\n      var exportLabelMethod = column.exportMethod;\n      if (!exportLabelMethod && renderOpts && renderOpts.name) {\n        var compConf = _vXETable.default.renderer.get(renderOpts.name);\n        if (compConf) {\n          exportLabelMethod = compConf.exportMethod || compConf.cellExportMethod;\n        }\n      }\n      if (exportLabelMethod) {\n        cellValue = exportLabelMethod({\n          $table: $xetable,\n          row: row,\n          column: column,\n          options: opts\n        });\n      } else {\n        switch (column.type) {\n          case 'seq':\n            cellValue = mode === 'all' ? $rowIndex + 1 : getSeq($xetable, row, $rowIndex, column, $columnIndex);\n            break;\n          case 'checkbox':\n            cellValue = toBooleanValue($xetable.isCheckedByCheckboxRow(row));\n            item._checkboxLabel = checkboxOpts.labelField ? _xeUtils.default.get(row, checkboxOpts.labelField) : '';\n            item._checkboxDisabled = checkboxOpts.checkMethod && !checkboxOpts.checkMethod({\n              row: row\n            });\n            break;\n          case 'radio':\n            cellValue = toBooleanValue($xetable.isCheckedByRadioRow(row));\n            item._radioLabel = radioOpts.labelField ? _xeUtils.default.get(row, radioOpts.labelField) : '';\n            item._radioDisabled = radioOpts.checkMethod && !radioOpts.checkMethod({\n              row: row\n            });\n            break;\n          default:\n            if (opts.original) {\n              cellValue = _utils.default.getCellValue(row, column);\n            } else {\n              cellValue = $xetable.getCellLabel(row, column);\n              if (column.type === 'html') {\n                htmlCellElem.innerHTML = cellValue;\n                cellValue = htmlCellElem.innerText.trim();\n              } else {\n                var cell = $xetable.getCell(row, column);\n                if (cell) {\n                  cellValue = cell.innerText.trim();\n                }\n              }\n            }\n        }\n      }\n      item[column.id] = _xeUtils.default.toValueString(cellValue);\n    });\n    return item;\n  });\n}\nfunction getExportData($xetable, opts) {\n  var columns = opts.columns,\n    dataFilterMethod = opts.dataFilterMethod;\n  var datas = opts.data;\n  if (dataFilterMethod) {\n    datas = datas.filter(function (row, index) {\n      return dataFilterMethod({\n        row: row,\n        $rowIndex: index\n      });\n    });\n  }\n  return getLabelData($xetable, opts, columns, datas);\n}\nfunction getBooleanValue(cellValue) {\n  return cellValue === 'TRUE' || cellValue === 'true' || cellValue === true;\n}\nfunction getHeaderTitle(opts, column) {\n  return (opts.original ? column.property : column.getTitle()) || '';\n}\nfunction getFooterCellValue($xetable, opts, items, column) {\n  var renderOpts = column.editRender || column.cellRender;\n  var exportLabelMethod = column.footerExportMethod;\n  if (!exportLabelMethod && renderOpts && renderOpts.name) {\n    var compConf = _vXETable.default.renderer.get(renderOpts.name);\n    if (compConf) {\n      exportLabelMethod = compConf.footerExportMethod || compConf.footerCellExportMethod;\n    }\n  }\n  var _columnIndex = $xetable.getVTColumnIndex(column);\n  var cellValue = exportLabelMethod ? exportLabelMethod({\n    $table: $xetable,\n    items: items,\n    itemIndex: _columnIndex,\n    _columnIndex: _columnIndex,\n    column: column,\n    options: opts\n  }) : _xeUtils.default.toValueString(items[_columnIndex]);\n  return cellValue;\n}\nfunction getFooterData(opts, footerTableData) {\n  var footerFilterMethod = opts.footerFilterMethod;\n  return footerFilterMethod ? footerTableData.filter(function (items, index) {\n    return footerFilterMethod({\n      items: items,\n      $rowIndex: index\n    });\n  }) : footerTableData;\n}\nfunction getCsvCellTypeLabel(column, cellValue) {\n  if (cellValue) {\n    if (column.type === 'seq') {\n      return \"\\t\".concat(cellValue);\n    }\n    switch (column.cellType) {\n      case 'string':\n        if (!isNaN(cellValue)) {\n          return \"\\t\".concat(cellValue);\n        }\n        break;\n      case 'number':\n        break;\n      default:\n        if (cellValue.length >= 12 && !isNaN(cellValue)) {\n          return \"\\t\".concat(cellValue);\n        }\n        break;\n    }\n  }\n  return cellValue;\n}\nfunction toTxtCellLabel(val) {\n  if (/[\",\\s\\n]/.test(val)) {\n    return \"\\\"\".concat(val.replace(/\"/g, '\"\"'), \"\\\"\");\n  }\n  return val;\n}\nfunction toCsv($xetable, opts, columns, datas) {\n  var content = csvBOM;\n  if (opts.isHeader) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(getHeaderTitle(opts, column));\n    }).join(',') + enterSymbol;\n  }\n  datas.forEach(function (row) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(getCsvCellTypeLabel(column, row[column.id]));\n    }).join(',') + enterSymbol;\n  });\n  if (opts.isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    footers.forEach(function (rows) {\n      content += columns.map(function (column) {\n        return toTxtCellLabel(getFooterCellValue($xetable, opts, rows, column));\n      }).join(',') + enterSymbol;\n    });\n  }\n  return content;\n}\nfunction toTxt($xetable, opts, columns, datas) {\n  var content = '';\n  if (opts.isHeader) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(getHeaderTitle(opts, column));\n    }).join('\\t') + enterSymbol;\n  }\n  datas.forEach(function (row) {\n    content += columns.map(function (column) {\n      return toTxtCellLabel(row[column.id]);\n    }).join('\\t') + enterSymbol;\n  });\n  if (opts.isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    footers.forEach(function (rows) {\n      content += columns.map(function (column) {\n        return toTxtCellLabel(getFooterCellValue($xetable, opts, rows, column));\n      }).join(',') + enterSymbol;\n    });\n  }\n  return content;\n}\nfunction hasEllipsis($xetable, column, property, allColumnOverflow) {\n  var columnOverflow = column[property];\n  var headOverflow = _xeUtils.default.isUndefined(columnOverflow) || _xeUtils.default.isNull(columnOverflow) ? allColumnOverflow : columnOverflow;\n  var showEllipsis = headOverflow === 'ellipsis';\n  var showTitle = headOverflow === 'title';\n  var showTooltip = headOverflow === true || headOverflow === 'tooltip';\n  var isEllipsis = showTitle || showTooltip || showEllipsis;\n  // 虚拟滚动不支持动态高度\n  if (($xetable.scrollXLoad || $xetable.scrollYLoad) && !isEllipsis) {\n    isEllipsis = true;\n  }\n  return isEllipsis;\n}\nfunction createHtmlPage(opts, content) {\n  var style = opts.style;\n  return ['<!DOCTYPE html><html>', '<head>', '<meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui\">', \"<title>\".concat(opts.sheetName, \"</title>\"), \"<style>\".concat(defaultHtmlStyle, \"</style>\"), style ? \"<style>\".concat(style, \"</style>\") : '', '</head>', \"<body>\".concat(content, \"</body>\"), '</html>'].join('');\n}\nfunction toHtml($xetable, opts, columns, datas) {\n  var id = $xetable.id,\n    border = $xetable.border,\n    treeConfig = $xetable.treeConfig,\n    treeOpts = $xetable.treeOpts,\n    isAllSelected = $xetable.isAllSelected,\n    isIndeterminate = $xetable.isIndeterminate,\n    allHeaderAlign = $xetable.headerAlign,\n    allAlign = $xetable.align,\n    allFooterAlign = $xetable.footerAlign,\n    allColumnOverflow = $xetable.showOverflow,\n    allColumnHeaderOverflow = $xetable.showHeaderOverflow,\n    mergeList = $xetable.mergeList;\n  var isPrint = opts.print,\n    isHeader = opts.isHeader,\n    isFooter = opts.isFooter,\n    isColgroup = opts.isColgroup,\n    isMerge = opts.isMerge,\n    colgroups = opts.colgroups,\n    original = opts.original;\n  var allCls = 'check-all';\n  var clss = ['vxe-table', \"border--\".concat(toTableBorder(border)), isPrint ? 'is--print' : '', isHeader ? 'is--header' : ''].filter(function (cls) {\n    return cls;\n  });\n  var tables = [\"<table class=\\\"\".concat(clss.join(' '), \"\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\"), \"<colgroup>\".concat(columns.map(function (column) {\n    return \"<col style=\\\"width:\".concat(column.renderWidth, \"px\\\">\");\n  }).join(''), \"</colgroup>\")];\n  if (isHeader) {\n    tables.push('<thead>');\n    if (isColgroup && !original) {\n      colgroups.forEach(function (cols) {\n        tables.push(\"<tr>\".concat(cols.map(function (column) {\n          var headAlign = column.headerAlign || column.align || allHeaderAlign || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showHeaderOverflow', allColumnHeaderOverflow) ? ['col--ellipsis'] : [];\n          var cellTitle = getHeaderTitle(opts, column);\n          var childWidth = 0;\n          var countChild = 0;\n          _xeUtils.default.eachTree([column], function (item) {\n            if (!item.childNodes || !column.childNodes.length) {\n              countChild++;\n            }\n            childWidth += item.renderWidth;\n          }, {\n            children: 'childNodes'\n          });\n          var cellWidth = childWidth - countChild;\n          if (headAlign) {\n            classNames.push(\"col--\".concat(headAlign));\n          }\n          if (column.type === 'checkbox') {\n            return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\" colspan=\\\"\").concat(column._colSpan, \"\\\" rowspan=\\\"\").concat(column._rowSpan, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(cellWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" class=\\\"\").concat(allCls, \"\\\" \").concat(isAllSelected ? 'checked' : '', \"><span>\").concat(cellTitle, \"</span></div></th>\");\n          }\n          return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\" colspan=\\\"\").concat(column._colSpan, \"\\\" rowspan=\\\"\").concat(column._rowSpan, \"\\\" title=\\\"\").concat(cellTitle, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(cellWidth, \"px\\\"\"), \"><span>\").concat(formatText(cellTitle, true), \"</span></div></th>\");\n        }).join(''), \"</tr>\"));\n      });\n    } else {\n      tables.push(\"<tr>\".concat(columns.map(function (column) {\n        var headAlign = column.headerAlign || column.align || allHeaderAlign || allAlign;\n        var classNames = hasEllipsis($xetable, column, 'showHeaderOverflow', allColumnHeaderOverflow) ? ['col--ellipsis'] : [];\n        var cellTitle = getHeaderTitle(opts, column);\n        if (headAlign) {\n          classNames.push(\"col--\".concat(headAlign));\n        }\n        if (column.type === 'checkbox') {\n          return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" class=\\\"\").concat(allCls, \"\\\" \").concat(isAllSelected ? 'checked' : '', \"><span>\").concat(cellTitle, \"</span></div></th>\");\n        }\n        return \"<th class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellTitle, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><span>\").concat(formatText(cellTitle, true), \"</span></div></th>\");\n      }).join(''), \"</tr>\"));\n    }\n    tables.push('</thead>');\n  }\n  if (datas.length) {\n    tables.push('<tbody>');\n    if (treeConfig) {\n      datas.forEach(function (item) {\n        tables.push('<tr>' + columns.map(function (column) {\n          var cellAlign = column.align || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showOverflow', allColumnOverflow) ? ['col--ellipsis'] : [];\n          var cellValue = item[column.id];\n          if (cellAlign) {\n            classNames.push(\"col--\".concat(cellAlign));\n          }\n          if (column.treeNode) {\n            var treeIcon = '';\n            if (item._hasChild) {\n              treeIcon = \"<i class=\\\"\".concat(item._expand ? 'vxe-table--tree-fold-icon' : 'vxe-table--tree-unfold-icon', \"\\\"></i>\");\n            }\n            classNames.push('vxe-table--tree-node');\n            if (column.type === 'radio') {\n              return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><div class=\\\"vxe-table--tree-node-wrapper\\\" style=\\\"padding-left: \").concat(item._level * treeOpts.indent, \"px\\\"><div class=\\\"vxe-table--tree-icon-wrapper\\\">\").concat(treeIcon, \"</div><div class=\\\"vxe-table--tree-cell\\\"><input type=\\\"radio\\\" name=\\\"radio_\").concat(id, \"\\\" \").concat(item._radioDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._radioLabel, \"</span></div></div></div></td>\");\n            } else if (column.type === 'checkbox') {\n              return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><div class=\\\"vxe-table--tree-node-wrapper\\\" style=\\\"padding-left: \").concat(item._level * treeOpts.indent, \"px\\\"><div class=\\\"vxe-table--tree-icon-wrapper\\\">\").concat(treeIcon, \"</div><div class=\\\"vxe-table--tree-cell\\\"><input type=\\\"checkbox\\\" \").concat(item._checkboxDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._checkboxLabel, \"</span></div></div></div></td>\");\n            }\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><div class=\\\"vxe-table--tree-node-wrapper\\\" style=\\\"padding-left: \").concat(item._level * treeOpts.indent, \"px\\\"><div class=\\\"vxe-table--tree-icon-wrapper\\\">\").concat(treeIcon, \"</div><div class=\\\"vxe-table--tree-cell\\\">\").concat(cellValue, \"</div></div></div></td>\");\n          }\n          if (column.type === 'radio') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"radio\\\" name=\\\"radio_\").concat(id, \"\\\" \").concat(item._radioDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._radioLabel, \"</span></div></td>\");\n          } else if (column.type === 'checkbox') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" \").concat(item._checkboxDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._checkboxLabel, \"</span></div></td>\");\n          }\n          return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \">\").concat(formatText(cellValue, true), \"</div></td>\");\n        }).join('') + '</tr>');\n      });\n    } else {\n      datas.forEach(function (item) {\n        tables.push('<tr>' + columns.map(function (column) {\n          var cellAlign = column.align || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showOverflow', allColumnOverflow) ? ['col--ellipsis'] : [];\n          var cellValue = item[column.id];\n          var rowSpan = 1;\n          var colSpan = 1;\n          if (isMerge && mergeList.length) {\n            var _rowIndex = $xetable.getVTRowIndex(item._row);\n            var _columnIndex = $xetable.getVTColumnIndex(column);\n            var spanRest = (0, _util.mergeBodyMethod)(mergeList, _rowIndex, _columnIndex);\n            if (spanRest) {\n              var rowspan = spanRest.rowspan,\n                colspan = spanRest.colspan;\n              if (!rowspan || !colspan) {\n                return '';\n              }\n              if (rowspan > 1) {\n                rowSpan = rowspan;\n              }\n              if (colspan > 1) {\n                colSpan = colspan;\n              }\n            }\n          }\n          if (cellAlign) {\n            classNames.push(\"col--\".concat(cellAlign));\n          }\n          if (column.type === 'radio') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" rowspan=\\\"\").concat(rowSpan, \"\\\" colspan=\\\"\").concat(colSpan, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"radio\\\" name=\\\"radio_\").concat(id, \"\\\" \").concat(item._radioDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._radioLabel, \"</span></div></td>\");\n          } else if (column.type === 'checkbox') {\n            return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" rowspan=\\\"\").concat(rowSpan, \"\\\" colspan=\\\"\").concat(colSpan, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \"><input type=\\\"checkbox\\\" \").concat(item._checkboxDisabled ? 'disabled ' : '').concat(getBooleanValue(cellValue) ? 'checked' : '', \"><span>\").concat(item._checkboxLabel, \"</span></div></td>\");\n          }\n          return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" rowspan=\\\"\").concat(rowSpan, \"\\\" colspan=\\\"\").concat(colSpan, \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \">\").concat(formatText(cellValue, true), \"</div></td>\");\n        }).join('') + '</tr>');\n      });\n    }\n    tables.push('</tbody>');\n  }\n  if (isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    if (footers.length) {\n      tables.push('<tfoot>');\n      footers.forEach(function (rows) {\n        tables.push(\"<tr>\".concat(columns.map(function (column) {\n          var footAlign = column.footerAlign || column.align || allFooterAlign || allAlign;\n          var classNames = hasEllipsis($xetable, column, 'showOverflow', allColumnOverflow) ? ['col--ellipsis'] : [];\n          var cellValue = getFooterCellValue($xetable, opts, rows, column);\n          if (footAlign) {\n            classNames.push(\"col--\".concat(footAlign));\n          }\n          return \"<td class=\\\"\".concat(classNames.join(' '), \"\\\" title=\\\"\").concat(cellValue, \"\\\"><div \").concat(isPrint ? '' : \"style=\\\"width: \".concat(column.renderWidth, \"px\\\"\"), \">\").concat(formatText(cellValue, true), \"</div></td>\");\n        }).join(''), \"</tr>\"));\n      });\n      tables.push('</tfoot>');\n    }\n  }\n  // 是否半选状态\n  var script = !isAllSelected && isIndeterminate ? \"<script>(function(){var a=document.querySelector(\\\".\".concat(allCls, \"\\\");if(a){a.indeterminate=true}})()</script>\") : '';\n  tables.push('</table>', script);\n  return isPrint ? tables.join('') : createHtmlPage(opts, tables.join(''));\n}\nfunction toXML($xetable, opts, columns, datas) {\n  var xml = ['<?xml version=\"1.0\"?>', '<?mso-application progid=\"Excel.Sheet\"?>', '<Workbook xmlns=\"urn:schemas-microsoft-com:office:spreadsheet\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\" xmlns:html=\"http://www.w3.org/TR/REC-html40\">', '<DocumentProperties xmlns=\"urn:schemas-microsoft-com:office:office\">', '<Version>16.00</Version>', '</DocumentProperties>', '<ExcelWorkbook xmlns=\"urn:schemas-microsoft-com:office:excel\">', '<WindowHeight>7920</WindowHeight>', '<WindowWidth>21570</WindowWidth>', '<WindowTopX>32767</WindowTopX>', '<WindowTopY>32767</WindowTopY>', '<ProtectStructure>False</ProtectStructure>', '<ProtectWindows>False</ProtectWindows>', '</ExcelWorkbook>', \"<Worksheet ss:Name=\\\"\".concat(opts.sheetName, \"\\\">\"), '<Table>', columns.map(function (column) {\n    return \"<Column ss:Width=\\\"\".concat(column.renderWidth, \"\\\"/>\");\n  }).join('')].join('');\n  if (opts.isHeader) {\n    xml += \"<Row>\".concat(columns.map(function (column) {\n      return \"<Cell><Data ss:Type=\\\"String\\\">\".concat(getHeaderTitle(opts, column), \"</Data></Cell>\");\n    }).join(''), \"</Row>\");\n  }\n  datas.forEach(function (row) {\n    xml += '<Row>' + columns.map(function (column) {\n      return \"<Cell><Data ss:Type=\\\"String\\\">\".concat(row[column.id], \"</Data></Cell>\");\n    }).join('') + '</Row>';\n  });\n  if (opts.isFooter) {\n    var footerTableData = $xetable.footerTableData;\n    var footers = getFooterData(opts, footerTableData);\n    footers.forEach(function (rows) {\n      xml += \"<Row>\".concat(columns.map(function (column) {\n        return \"<Cell><Data ss:Type=\\\"String\\\">\".concat(getFooterCellValue($xetable, opts, rows, column), \"</Data></Cell>\");\n      }).join(''), \"</Row>\");\n    });\n  }\n  return \"\".concat(xml, \"</Table></Worksheet></Workbook>\");\n}\nfunction getContent($xetable, opts, columns, datas) {\n  if (columns.length) {\n    switch (opts.type) {\n      case 'csv':\n        return toCsv($xetable, opts, columns, datas);\n      case 'txt':\n        return toTxt($xetable, opts, columns, datas);\n      case 'html':\n        return toHtml($xetable, opts, columns, datas);\n      case 'xml':\n        return toXML($xetable, opts, columns, datas);\n    }\n  }\n  return '';\n}\n\n/**\r\n * 保存文件到本地\r\n * @param {*} options 参数\r\n */\nfunction saveLocalFile(options) {\n  var filename = options.filename,\n    type = options.type,\n    content = options.content;\n  var name = \"\".concat(filename, \".\").concat(type);\n  if (window.Blob) {\n    var blob = content instanceof Blob ? content : getExportBlobByContent(_xeUtils.default.toValueString(content), options);\n    if (navigator.msSaveBlob) {\n      navigator.msSaveBlob(blob, name);\n    } else {\n      var url = URL.createObjectURL(blob);\n      var linkElem = document.createElement('a');\n      linkElem.target = '_blank';\n      linkElem.download = name;\n      linkElem.href = url;\n      document.body.appendChild(linkElem);\n      linkElem.click();\n      document.body.removeChild(linkElem);\n      requestAnimationFrame(function () {\n        if (linkElem.parentNode) {\n          linkElem.parentNode.removeChild(linkElem);\n        }\n        URL.revokeObjectURL(url);\n      });\n    }\n    return Promise.resolve();\n  }\n  return Promise.reject(new Error((0, _log.getLog)('vxe.error.notExp')));\n}\nfunction downloadFile($xetable, opts, content) {\n  var filename = opts.filename,\n    type = opts.type,\n    download = opts.download;\n  if (!download) {\n    var blob = getExportBlobByContent(content, opts);\n    return Promise.resolve({\n      type: type,\n      content: content,\n      blob: blob\n    });\n  }\n  saveLocalFile({\n    filename: filename,\n    type: type,\n    content: content\n  }).then(function () {\n    if (opts.message !== false) {\n      // 检测弹窗模块\n      if (process.env.NODE_ENV === 'development') {\n        if (!_vXETable.default.modal) {\n          (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n        }\n      }\n      _vXETable.default.modal.message({\n        content: _conf.default.i18n('vxe.table.expSuccess'),\n        status: 'success'\n      });\n    }\n  });\n}\nfunction clearColumnConvert(columns) {\n  _xeUtils.default.eachTree(columns, function (column) {\n    delete column._level;\n    delete column._colSpan;\n    delete column._rowSpan;\n    delete column._children;\n    delete column.childNodes;\n  }, {\n    children: 'children'\n  });\n}\nfunction handleExport($xetable, opts) {\n  var remote = opts.remote,\n    columns = opts.columns,\n    colgroups = opts.colgroups,\n    exportMethod = opts.exportMethod,\n    afterExportMethod = opts.afterExportMethod;\n  return new Promise(function (resolve) {\n    if (remote) {\n      var params = {\n        options: opts,\n        $table: $xetable,\n        $grid: $xetable.$xegrid\n      };\n      resolve(exportMethod ? exportMethod(params) : params);\n    } else {\n      var datas = getExportData($xetable, opts);\n      resolve($xetable.preventEvent(null, 'event.export', {\n        options: opts,\n        columns: columns,\n        colgroups: colgroups,\n        datas: datas\n      }, function () {\n        return downloadFile($xetable, opts, getContent($xetable, opts, columns, datas));\n      }));\n    }\n  }).then(function (params) {\n    clearColumnConvert(columns);\n    if (!opts.print) {\n      if (afterExportMethod) {\n        afterExportMethod({\n          status: true,\n          options: opts,\n          $table: $xetable,\n          $grid: $xetable.$xegrid\n        });\n      }\n    }\n    return Object.assign({\n      status: true\n    }, params);\n  }).catch(function () {\n    clearColumnConvert(columns);\n    if (!opts.print) {\n      if (afterExportMethod) {\n        afterExportMethod({\n          status: false,\n          options: opts,\n          $table: $xetable,\n          $grid: $xetable.$xegrid\n        });\n      }\n    }\n    var params = {\n      status: false\n    };\n    return Promise.reject(params);\n  });\n}\nfunction getElementsByTagName(elem, qualifiedName) {\n  return elem.getElementsByTagName(qualifiedName);\n}\nfunction getTxtCellKey(now) {\n  return \"#\".concat(now, \"@\").concat(_xeUtils.default.uniqueId());\n}\nfunction replaceTxtCell(cell, vMaps) {\n  return cell.replace(/#\\d+@\\d+/g, function (key) {\n    return _xeUtils.default.hasOwnProp(vMaps, key) ? vMaps[key] : key;\n  });\n}\nfunction getTxtCellValue(val, vMaps) {\n  var rest = replaceTxtCell(val, vMaps);\n  return rest.replace(/^\"+$/g, function (qVal) {\n    return '\"'.repeat(Math.ceil(qVal.length / 2));\n  });\n}\nfunction parseCsvAndTxt(columns, content, cellSeparator) {\n  var list = content.split(enterSymbol);\n  var rows = [];\n  var fields = [];\n  if (list.length) {\n    var vMaps = {};\n    var now = Date.now();\n    list.forEach(function (rVal) {\n      if (rVal) {\n        var item = {};\n        rVal = rVal.replace(/(\"\")|(\\n)/g, function (text, dVal) {\n          var key = getTxtCellKey(now);\n          vMaps[key] = dVal ? '\"' : '\\n';\n          return key;\n        }).replace(/\"(.*?)\"/g, function (text, cVal) {\n          var key = getTxtCellKey(now);\n          vMaps[key] = replaceTxtCell(cVal, vMaps);\n          return key;\n        });\n        var cells = rVal.split(cellSeparator);\n        if (!fields.length) {\n          fields = cells.map(function (val) {\n            return getTxtCellValue(val.trim(), vMaps);\n          });\n        } else {\n          cells.forEach(function (val, colIndex) {\n            if (colIndex < fields.length) {\n              item[fields[colIndex]] = getTxtCellValue(val, vMaps);\n            }\n          });\n          rows.push(item);\n        }\n      }\n    });\n  }\n  return {\n    fields: fields,\n    rows: rows\n  };\n}\nfunction parseCsv(columns, content) {\n  return parseCsvAndTxt(columns, content, ',');\n}\nfunction parseTxt(columns, content) {\n  return parseCsvAndTxt(columns, content, '\\t');\n}\nfunction parseHTML(columns, content) {\n  var domParser = new DOMParser();\n  var xmlDoc = domParser.parseFromString(content, 'text/html');\n  var bodyNodes = getElementsByTagName(xmlDoc, 'body');\n  var rows = [];\n  var fields = [];\n  if (bodyNodes.length) {\n    var tableNodes = getElementsByTagName(bodyNodes[0], 'table');\n    if (tableNodes.length) {\n      var theadNodes = getElementsByTagName(tableNodes[0], 'thead');\n      if (theadNodes.length) {\n        _xeUtils.default.arrayEach(getElementsByTagName(theadNodes[0], 'tr'), function (rowNode) {\n          _xeUtils.default.arrayEach(getElementsByTagName(rowNode, 'th'), function (cellNode) {\n            fields.push(cellNode.textContent);\n          });\n        });\n        var tbodyNodes = getElementsByTagName(tableNodes[0], 'tbody');\n        if (tbodyNodes.length) {\n          _xeUtils.default.arrayEach(getElementsByTagName(tbodyNodes[0], 'tr'), function (rowNode) {\n            var item = {};\n            _xeUtils.default.arrayEach(getElementsByTagName(rowNode, 'td'), function (cellNode, colIndex) {\n              if (fields[colIndex]) {\n                item[fields[colIndex]] = cellNode.textContent || '';\n              }\n            });\n            rows.push(item);\n          });\n        }\n      }\n    }\n  }\n  return {\n    fields: fields,\n    rows: rows\n  };\n}\nfunction parseXML(columns, content) {\n  var domParser = new DOMParser();\n  var xmlDoc = domParser.parseFromString(content, 'application/xml');\n  var sheetNodes = getElementsByTagName(xmlDoc, 'Worksheet');\n  var rows = [];\n  var fields = [];\n  if (sheetNodes.length) {\n    var tableNodes = getElementsByTagName(sheetNodes[0], 'Table');\n    if (tableNodes.length) {\n      var rowNodes = getElementsByTagName(tableNodes[0], 'Row');\n      if (rowNodes.length) {\n        _xeUtils.default.arrayEach(getElementsByTagName(rowNodes[0], 'Cell'), function (cellNode) {\n          fields.push(cellNode.textContent);\n        });\n        _xeUtils.default.arrayEach(rowNodes, function (rowNode, index) {\n          if (index) {\n            var item = {};\n            var cellNodes = getElementsByTagName(rowNode, 'Cell');\n            _xeUtils.default.arrayEach(cellNodes, function (cellNode, colIndex) {\n              if (fields[colIndex]) {\n                item[fields[colIndex]] = cellNode.textContent;\n              }\n            });\n            rows.push(item);\n          }\n        });\n      }\n    }\n  }\n  return {\n    fields: fields,\n    rows: rows\n  };\n}\n\n/**\r\n * 检查导入的列是否完整\r\n * @param {Array} fields 字段名列表\r\n * @param {Array} rows 数据列表\r\n */\nfunction checkImportData(columns, fields) {\n  var tableFields = [];\n  columns.forEach(function (column) {\n    var field = column.property;\n    if (field) {\n      tableFields.push(field);\n    }\n  });\n  return fields.some(function (field) {\n    return tableFields.indexOf(field) > -1;\n  });\n}\nfunction handleImport($xetable, content, opts) {\n  var tableFullColumn = $xetable.tableFullColumn,\n    _importResolve = $xetable._importResolve,\n    _importReject = $xetable._importReject;\n  var rest = {\n    fields: [],\n    rows: []\n  };\n  switch (opts.type) {\n    case 'csv':\n      rest = parseCsv(tableFullColumn, content);\n      break;\n    case 'txt':\n      rest = parseTxt(tableFullColumn, content);\n      break;\n    case 'html':\n      rest = parseHTML(tableFullColumn, content);\n      break;\n    case 'xml':\n      rest = parseXML(tableFullColumn, content);\n      break;\n  }\n  var _rest = rest,\n    fields = _rest.fields,\n    rows = _rest.rows;\n  var status = checkImportData(tableFullColumn, fields);\n  if (status) {\n    $xetable.createData(rows).then(function (data) {\n      var loadRest;\n      if (opts.mode === 'insert') {\n        loadRest = $xetable.insert(data);\n      } else {\n        loadRest = $xetable.reloadData(data);\n      }\n      if (opts.message !== false) {\n        // 检测弹窗模块\n        if (process.env.NODE_ENV === 'development') {\n          if (!_vXETable.default.modal) {\n            (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n          }\n        }\n        _vXETable.default.modal.message({\n          content: _conf.default.i18n('vxe.table.impSuccess', [rows.length]),\n          status: 'success'\n        });\n      }\n      return loadRest.then(function () {\n        if (_importResolve) {\n          _importResolve({\n            status: true\n          });\n        }\n      });\n    });\n  } else if (opts.message !== false) {\n    // 检测弹窗模块\n    if (process.env.NODE_ENV === 'development') {\n      if (!_vXETable.default.modal) {\n        (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n      }\n    }\n    _vXETable.default.modal.message({\n      content: _conf.default.i18n('vxe.error.impFields'),\n      status: 'error'\n    });\n    if (_importReject) {\n      _importReject({\n        status: false\n      });\n    }\n  }\n}\nfunction handleFileImport($xetable, file, opts) {\n  var importMethod = opts.importMethod,\n    afterImportMethod = opts.afterImportMethod;\n  var _UtilTools$parseFile = _utils.default.parseFile(file),\n    type = _UtilTools$parseFile.type,\n    filename = _UtilTools$parseFile.filename;\n\n  // 检查类型，如果为自定义导出，则不需要校验类型\n  if (!importMethod && !_xeUtils.default.includes(_vXETable.default.config.importTypes, type)) {\n    if (opts.message !== false) {\n      // 检测弹窗模块\n      if (process.env.NODE_ENV === 'development') {\n        if (!_vXETable.default.modal) {\n          (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n        }\n      }\n      _vXETable.default.modal.message({\n        content: _conf.default.i18n('vxe.error.notType', [type]),\n        status: 'error'\n      });\n    }\n    var params = {\n      status: false\n    };\n    return Promise.reject(params);\n  }\n  var rest = new Promise(function (resolve, reject) {\n    var _importResolve = function _importResolve(params) {\n      resolve(params);\n      $xetable._importResolve = null;\n      $xetable._importReject = null;\n    };\n    var _importReject = function _importReject(params) {\n      reject(params);\n      $xetable._importResolve = null;\n      $xetable._importReject = null;\n    };\n    $xetable._importResolve = _importResolve;\n    $xetable._importReject = _importReject;\n    if (window.FileReader) {\n      var options = Object.assign({\n        mode: 'insert'\n      }, opts, {\n        type: type,\n        filename: filename\n      });\n      if (options.remote) {\n        if (importMethod) {\n          Promise.resolve(importMethod({\n            file: file,\n            options: options,\n            $table: $xetable\n          })).then(function () {\n            _importResolve({\n              status: true\n            });\n          }).catch(function () {\n            _importResolve({\n              status: true\n            });\n          });\n        } else {\n          _importResolve({\n            status: true\n          });\n        }\n      } else {\n        $xetable.preventEvent(null, 'event.import', {\n          file: file,\n          options: options,\n          columns: $xetable.tableFullColumn\n        }, function () {\n          var reader = new FileReader();\n          reader.onerror = function () {\n            (0, _log.errLog)('vxe.error.notType', [type]);\n            _importReject({\n              status: false\n            });\n          };\n          reader.onload = function (e) {\n            handleImport($xetable, e.target.result, options);\n          };\n          reader.readAsText(file, options.encoding || 'UTF-8');\n        });\n      }\n    } else {\n      // 不支持的浏览器\n      if (process.env.NODE_ENV === 'development') {\n        (0, _log.errLog)('vxe.error.notExp');\n      }\n      _importResolve({\n        status: true\n      });\n    }\n  });\n  return rest.then(function () {\n    if (afterImportMethod) {\n      afterImportMethod({\n        status: true,\n        options: opts,\n        $table: $xetable\n      });\n    }\n  }).catch(function (e) {\n    if (afterImportMethod) {\n      afterImportMethod({\n        status: false,\n        options: opts,\n        $table: $xetable\n      });\n    }\n    return Promise.reject(e);\n  });\n}\n\n/**\r\n * 读取本地文件\r\n * @param {*} options 参数\r\n */\nfunction readLocalFile() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (!fileForm) {\n    fileForm = document.createElement('form');\n    fileInput = document.createElement('input');\n    fileForm.className = 'vxe-table--file-form';\n    fileInput.name = 'file';\n    fileInput.type = 'file';\n    fileForm.appendChild(fileInput);\n    document.body.appendChild(fileForm);\n  }\n  return new Promise(function (resolve, reject) {\n    var types = options.types || [];\n    var isAllType = !types.length || types.some(function (type) {\n      return type === '*';\n    });\n    fileInput.multiple = !!options.multiple;\n    fileInput.accept = isAllType ? '' : \".\".concat(types.join(', .'));\n    fileInput.onchange = function (evnt) {\n      var files = evnt.target.files;\n      var file = files[0];\n      var errType;\n      // 校验类型\n      if (!isAllType) {\n        for (var fIndex = 0; fIndex < files.length; fIndex++) {\n          var _UtilTools$parseFile2 = _utils.default.parseFile(files[fIndex]),\n            type = _UtilTools$parseFile2.type;\n          if (!_xeUtils.default.includes(types, type)) {\n            errType = type;\n            break;\n          }\n        }\n      }\n      if (!errType) {\n        resolve({\n          status: true,\n          files: files,\n          file: file\n        });\n      } else {\n        if (options.message !== false) {\n          // 检测弹窗模块\n          if (process.env.NODE_ENV === 'development') {\n            if (!_vXETable.default.modal) {\n              (0, _log.errLog)('vxe.error.reqModule', ['Modal']);\n            }\n          }\n          _vXETable.default.modal.message({\n            content: _conf.default.i18n('vxe.error.notType', [errType]),\n            status: 'error'\n          });\n        }\n        var params = {\n          status: false,\n          files: files,\n          file: file\n        };\n        reject(params);\n      }\n    };\n    fileForm.reset();\n    fileInput.click();\n  });\n}\nfunction removePrintFrame() {\n  if (printFrame) {\n    if (printFrame.parentNode) {\n      try {\n        printFrame.contentDocument.write('');\n      } catch (e) {}\n      printFrame.parentNode.removeChild(printFrame);\n    }\n    printFrame = null;\n  }\n}\nfunction appendPrintFrame() {\n  if (!printFrame.parentNode) {\n    document.body.appendChild(printFrame);\n  }\n}\nfunction afterPrintEvent() {\n  requestAnimationFrame(removePrintFrame);\n}\nfunction handlePrint($xetable, opts, content) {\n  var beforePrintMethod = opts.beforePrintMethod;\n  if (beforePrintMethod) {\n    content = beforePrintMethod({\n      content: content,\n      options: opts,\n      $table: $xetable\n    }) || '';\n  }\n  content = createHtmlPage(opts, content);\n  var blob = getExportBlobByContent(content, opts);\n  if (_dom.browse.msie) {\n    removePrintFrame();\n    printFrame = createFrame();\n    appendPrintFrame();\n    printFrame.contentDocument.write(content);\n    printFrame.contentDocument.execCommand('print');\n  } else {\n    if (!printFrame) {\n      printFrame = createFrame();\n      printFrame.onload = function (evnt) {\n        if (evnt.target.src) {\n          evnt.target.contentWindow.onafterprint = afterPrintEvent;\n          evnt.target.contentWindow.print();\n        }\n      };\n    }\n    appendPrintFrame();\n    printFrame.src = URL.createObjectURL(blob);\n  }\n}\nfunction handleExportAndPrint($xetable, options, isPrint) {\n  var initStore = $xetable.initStore,\n    customOpts = $xetable.customOpts,\n    collectColumn = $xetable.collectColumn,\n    footerTableData = $xetable.footerTableData,\n    treeConfig = $xetable.treeConfig,\n    mergeList = $xetable.mergeList,\n    isGroup = $xetable.isGroup,\n    exportParams = $xetable.exportParams;\n  var selectRecords = $xetable.getCheckboxRecords();\n  var hasFooter = !!footerTableData.length;\n  var hasTree = treeConfig;\n  var hasMerge = !hasTree && mergeList.length;\n  var defOpts = Object.assign({\n    message: true,\n    isHeader: true\n  }, options);\n  var types = defOpts.types || _vXETable.default.config.exportTypes;\n  var modes = defOpts.modes;\n  var checkMethod = customOpts.checkMethod;\n  var exportColumns = collectColumn.slice(0);\n  var columns = defOpts.columns;\n  // 处理类型\n  var typeList = types.map(function (value) {\n    return {\n      value: value,\n      label: \"vxe.export.types.\".concat(value)\n    };\n  });\n  var modeList = modes.map(function (value) {\n    return {\n      value: value,\n      label: \"vxe.export.modes.\".concat(value)\n    };\n  });\n  // 默认选中\n  _xeUtils.default.eachTree(exportColumns, function (column, index, items, path, parent) {\n    var isColGroup = column.children && column.children.length;\n    if (isColGroup || defaultFilterExportColumn(column)) {\n      column.checked = columns ? columns.some(function (item) {\n        if ((0, _util.isColumnInfo)(item)) {\n          return column === item;\n        } else if (_xeUtils.default.isString(item)) {\n          return column.field === item;\n        } else {\n          var colid = item.id || item.colId;\n          var type = item.type;\n          var field = item.property || item.field;\n          if (colid) {\n            return column.id === colid;\n          } else if (field && type) {\n            return column.property === field && column.type === type;\n          } else if (field) {\n            return column.property === field;\n          } else if (type) {\n            return column.type === type;\n          }\n        }\n        return false;\n      }) : column.visible;\n      column.halfChecked = false;\n      column.disabled = parent && parent.disabled || (checkMethod ? !checkMethod({\n        column: column\n      }) : false);\n    }\n  });\n  // 更新条件\n  Object.assign($xetable.exportStore, {\n    columns: exportColumns,\n    typeList: typeList,\n    modeList: modeList,\n    hasFooter: hasFooter,\n    hasMerge: hasMerge,\n    hasTree: hasTree,\n    isPrint: isPrint,\n    hasColgroup: isGroup,\n    visible: true\n  });\n  // 默认参数\n  if (!initStore.export) {\n    Object.assign(exportParams, {\n      mode: selectRecords.length ? 'selected' : 'current'\n    }, defOpts);\n  }\n  if (modes.indexOf(exportParams.mode) === -1) {\n    exportParams.mode = modes[0];\n  }\n  if (types.indexOf(exportParams.type) === -1) {\n    exportParams.type = types[0];\n  }\n  initStore.export = true;\n  return $xetable.$nextTick();\n}\nvar getConvertColumns = function getConvertColumns(columns) {\n  var result = [];\n  columns.forEach(function (column) {\n    if (column.childNodes && column.childNodes.length) {\n      result.push(column);\n      result.push.apply(result, _toConsumableArray(getConvertColumns(column.childNodes)));\n    } else {\n      result.push(column);\n    }\n  });\n  return result;\n};\nvar convertToRows = function convertToRows(originColumns) {\n  var maxLevel = 1;\n  var traverse = function traverse(column, parent) {\n    if (parent) {\n      column._level = parent._level + 1;\n      if (maxLevel < column._level) {\n        maxLevel = column._level;\n      }\n    }\n    if (column.childNodes && column.childNodes.length) {\n      var colSpan = 0;\n      column.childNodes.forEach(function (subColumn) {\n        traverse(subColumn, column);\n        colSpan += subColumn._colSpan;\n      });\n      column._colSpan = colSpan;\n    } else {\n      column._colSpan = 1;\n    }\n  };\n  originColumns.forEach(function (column) {\n    column._level = 1;\n    traverse(column);\n  });\n  var rows = [];\n  for (var i = 0; i < maxLevel; i++) {\n    rows.push([]);\n  }\n  var allColumns = getConvertColumns(originColumns);\n  allColumns.forEach(function (column) {\n    if (column.childNodes && column.childNodes.length) {\n      column._rowSpan = 1;\n    } else {\n      column._rowSpan = maxLevel - column._level + 1;\n    }\n    rows[column._level - 1].push(column);\n  });\n  return rows;\n};\nvar _default = {\n  methods: {\n    /**\r\n     * 导出文件，支持 csv/html/xml/txt\r\n     * 如果是树表格，则默认是导出所有节点\r\n     * 如果是启用了虚拟滚动，则只能导出数据源，可以配合 dataFilterMethod 函数自行转换数据\r\n     * @param {Object} options 参数\r\n     */\n    _exportData: function _exportData(options) {\n      var _this = this;\n      var $xegrid = this.$xegrid,\n        isGroup = this.isGroup,\n        tableGroupColumn = this.tableGroupColumn,\n        tableFullColumn = this.tableFullColumn,\n        afterFullData = this.afterFullData,\n        treeConfig = this.treeConfig,\n        treeOpts = this.treeOpts,\n        exportOpts = this.exportOpts;\n      var opts = Object.assign({\n        // filename: '',\n        // sheetName: '',\n        // original: false,\n        // message: false,\n        isHeader: true,\n        isFooter: true,\n        isColgroup: true,\n        isMerge: false,\n        isAllExpand: false,\n        download: true,\n        type: 'csv',\n        mode: 'current'\n        // data: null,\n        // remote: false,\n        // dataFilterMethod: null,\n        // footerFilterMethod: null,\n        // exportMethod: null,\n        // columnFilterMethod: null,\n        // beforeExportMethod: null,\n        // afterExportMethod: null\n      }, exportOpts, {\n        print: false\n      }, options);\n      var type = opts.type,\n        mode = opts.mode,\n        columns = opts.columns,\n        original = opts.original,\n        beforeExportMethod = opts.beforeExportMethod;\n      var groups = [];\n      var customCols = columns && columns.length ? columns : null;\n      // 如果设置源数据，则默认导出设置了字段的列\n      var columnFilterMethod = opts.columnFilterMethod;\n      if (!customCols && !columnFilterMethod) {\n        columnFilterMethod = original ? function (_ref) {\n          var column = _ref.column;\n          return column.property;\n        } : function (_ref2) {\n          var column = _ref2.column;\n          return defaultFilterExportColumn(column);\n        };\n      }\n      if (customCols) {\n        groups = _xeUtils.default.searchTree(_xeUtils.default.mapTree(customCols, function (item) {\n          var targetColumn;\n          if (item) {\n            if ((0, _util.isColumnInfo)(item)) {\n              targetColumn = item;\n            } else if (_xeUtils.default.isString(item)) {\n              targetColumn = _this.getColumnByField(item);\n            } else {\n              var colid = item.id || item.colId;\n              var _type = item.type;\n              var field = item.property || item.field;\n              if (colid) {\n                targetColumn = _this.getColumnById(colid);\n              } else if (field && _type) {\n                targetColumn = tableFullColumn.find(function (column) {\n                  return column.property === field && column.type === _type;\n                });\n              } else if (field) {\n                targetColumn = _this.getColumnByField(field);\n              } else if (_type) {\n                targetColumn = tableFullColumn.find(function (column) {\n                  return column.type === _type;\n                });\n              }\n            }\n            return targetColumn || {};\n          }\n        }, {\n          children: 'childNodes',\n          mapChildren: '_children'\n        }), function (column, index) {\n          return (0, _util.isColumnInfo)(column) && (!columnFilterMethod || columnFilterMethod({\n            column: column,\n            $columnIndex: index\n          }));\n        }, {\n          children: '_children',\n          mapChildren: 'childNodes',\n          original: true\n        });\n      } else {\n        groups = _xeUtils.default.searchTree(isGroup ? tableGroupColumn : tableFullColumn, function (column, index) {\n          return column.visible && (!columnFilterMethod || columnFilterMethod({\n            column: column,\n            $columnIndex: index\n          }));\n        }, {\n          children: 'children',\n          mapChildren: 'childNodes',\n          original: true\n        });\n      }\n      // 获取所有列\n      var cols = [];\n      _xeUtils.default.eachTree(groups, function (column) {\n        var isColGroup = column.children && column.children.length;\n        if (!isColGroup) {\n          cols.push(column);\n        }\n      }, {\n        children: 'childNodes'\n      });\n      // 构建分组层级\n      opts.columns = cols;\n      opts.colgroups = convertToRows(groups);\n      if (!opts.filename) {\n        opts.filename = _conf.default.i18n(opts.original ? 'vxe.table.expOriginFilename' : 'vxe.table.expFilename', [_xeUtils.default.toDateString(Date.now(), 'yyyyMMddHHmmss')]);\n      }\n      if (!opts.sheetName) {\n        opts.sheetName = document.title;\n      }\n\n      // 检查类型，如果为自定义导出，则不需要校验类型\n      if (!opts.exportMethod && !_xeUtils.default.includes(_vXETable.default.config.exportTypes, type)) {\n        if (process.env.NODE_ENV === 'development') {\n          (0, _log.errLog)('vxe.error.notType', [type]);\n        }\n        var params = {\n          status: false\n        };\n        return Promise.reject(params);\n      }\n      if (!opts.print) {\n        if (beforeExportMethod) {\n          beforeExportMethod({\n            options: opts,\n            $table: this,\n            $grid: $xegrid\n          });\n        }\n      }\n      if (!opts.data) {\n        opts.data = afterFullData;\n        if (mode === 'selected') {\n          var selectRecords = this.getCheckboxRecords();\n          if (['html', 'pdf'].indexOf(type) > -1 && treeConfig) {\n            opts.data = _xeUtils.default.searchTree(this.getTableData().fullData, function (item) {\n              return selectRecords.indexOf(item) > -1;\n            }, Object.assign({}, treeOpts, {\n              data: '_row'\n            }));\n          } else {\n            opts.data = selectRecords;\n          }\n        } else if (mode === 'all') {\n          if (process.env.NODE_ENV === 'development') {\n            if (!$xegrid) {\n              (0, _log.warnLog)('vxe.error.errProp', ['all', 'mode=current,selected']);\n            }\n          }\n          if ($xegrid && !opts.remote) {\n            var _$xegrid$proxyOpts = $xegrid.proxyOpts,\n              beforeQueryAll = _$xegrid$proxyOpts.beforeQueryAll,\n              afterQueryAll = _$xegrid$proxyOpts.afterQueryAll,\n              _$xegrid$proxyOpts$aj = _$xegrid$proxyOpts.ajax,\n              ajax = _$xegrid$proxyOpts$aj === void 0 ? {} : _$xegrid$proxyOpts$aj,\n              _$xegrid$proxyOpts$pr = _$xegrid$proxyOpts.props,\n              props = _$xegrid$proxyOpts$pr === void 0 ? {} : _$xegrid$proxyOpts$pr;\n            var ajaxMethods = ajax.queryAll;\n            if (process.env.NODE_ENV === 'development') {\n              if (!ajaxMethods) {\n                (0, _log.warnLog)('vxe.error.notFunc', ['proxy-config.ajax.queryAll']);\n              }\n            }\n            if (ajaxMethods) {\n              var _params = {\n                $table: this,\n                $grid: $xegrid,\n                sort: $xegrid.sortData,\n                filters: $xegrid.filterData,\n                form: $xegrid.formData,\n                target: ajaxMethods,\n                options: opts\n              };\n              return Promise.resolve((beforeQueryAll || ajaxMethods)(_params)).catch(function (e) {\n                return e;\n              }).then(function (rest) {\n                opts.data = (props.list ? _xeUtils.default.get(rest, props.list) : rest) || [];\n                if (afterQueryAll) {\n                  afterQueryAll(_params);\n                }\n                return handleExport(_this, opts);\n              });\n            }\n          }\n        }\n      }\n      return handleExport(this, opts);\n    },\n    _importByFile: function _importByFile(file, options) {\n      var opts = Object.assign({}, options);\n      var beforeImportMethod = opts.beforeImportMethod;\n      if (beforeImportMethod) {\n        beforeImportMethod({\n          options: opts,\n          $table: this\n        });\n      }\n      return handleFileImport(this, file, opts);\n    },\n    _importData: function _importData(options) {\n      var _this2 = this;\n      var opts = Object.assign({\n        types: _vXETable.default.config.importTypes\n        // beforeImportMethod: null,\n        // afterImportMethod: null\n      }, this.importOpts, options);\n      var beforeImportMethod = opts.beforeImportMethod,\n        afterImportMethod = opts.afterImportMethod;\n      if (beforeImportMethod) {\n        beforeImportMethod({\n          options: opts,\n          $table: this\n        });\n      }\n      return readLocalFile(opts).catch(function (e) {\n        if (afterImportMethod) {\n          afterImportMethod({\n            status: false,\n            options: opts,\n            $table: _this2\n          });\n        }\n        return Promise.reject(e);\n      }).then(function (params) {\n        var file = params.file;\n        return handleFileImport(_this2, file, opts);\n      });\n    },\n    _saveFile: function _saveFile(options) {\n      return saveLocalFile(options);\n    },\n    _readFile: function _readFile(options) {\n      return readLocalFile(options);\n    },\n    _print: function _print(options) {\n      var _this3 = this;\n      var opts = Object.assign({\n        original: false\n        // beforePrintMethod\n      }, this.printOpts, options, {\n        type: 'html',\n        download: false,\n        remote: false,\n        print: true\n      });\n      if (!opts.sheetName) {\n        opts.sheetName = document.title;\n      }\n      return new Promise(function (resolve) {\n        if (opts.content) {\n          resolve(handlePrint(_this3, opts, opts.content));\n        } else {\n          resolve(_this3.exportData(opts).then(function (_ref3) {\n            var content = _ref3.content;\n            return handlePrint(_this3, opts, content);\n          }));\n        }\n      });\n    },\n    _openImport: function _openImport(options) {\n      var defOpts = Object.assign({\n        mode: 'insert',\n        message: true,\n        types: _vXETable.default.config.importTypes\n      }, options, this.importOpts);\n      var types = defOpts.types;\n      var isTree = !!this.getTreeStatus();\n      if (isTree) {\n        if (defOpts.message) {\n          _vXETable.default.modal.message({\n            content: _conf.default.i18n('vxe.error.treeNotImp'),\n            status: 'error'\n          });\n        }\n        return;\n      }\n      if (!this.importConfig) {\n        (0, _log.errLog)('vxe.error.reqProp', ['import-config']);\n      }\n      // 处理类型\n      var typeList = types.map(function (value) {\n        return {\n          value: value,\n          label: \"vxe.export.types.\".concat(value)\n        };\n      });\n      var modeList = defOpts.modes.map(function (value) {\n        return {\n          value: value,\n          label: \"vxe.import.modes.\".concat(value)\n        };\n      });\n      Object.assign(this.importStore, {\n        file: null,\n        type: '',\n        filename: '',\n        modeList: modeList,\n        typeList: typeList,\n        visible: true\n      });\n      Object.assign(this.importParams, defOpts);\n      this.initStore.import = true;\n    },\n    _openExport: function _openExport(options) {\n      var exportOpts = this.exportOpts;\n      if (process.env.NODE_ENV === 'development') {\n        if (!this.exportConfig) {\n          (0, _log.errLog)('vxe.error.reqProp', ['export-config']);\n        }\n      }\n      return handleExportAndPrint(this, Object.assign({}, exportOpts, options));\n    },\n    _openPrint: function _openPrint(options) {\n      var printOpts = this.printOpts;\n      if (process.env.NODE_ENV === 'development') {\n        if (!this.printConfig) {\n          (0, _log.errLog)('vxe.error.reqProp', ['print-config']);\n        }\n      }\n      return handleExportAndPrint(this, Object.assign({}, printOpts, options), true);\n    }\n  }\n};\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}