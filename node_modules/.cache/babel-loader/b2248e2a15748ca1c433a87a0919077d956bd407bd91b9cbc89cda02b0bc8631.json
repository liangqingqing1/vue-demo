{"ast":null,"code":"var setupDefaults = require('./setupDefaults');\nvar staticDayTime = require('./staticDayTime');\nvar staticWeekTime = require('./staticWeekTime');\nvar helperGetDateTime = require('./helperGetDateTime');\nvar toStringDate = require('./toStringDate');\nvar isValidDate = require('./isValidDate');\nvar isNumber = require('./isNumber');\n\n/**\r\n  * 返回前几周或后几周的星期几\r\n  *\r\n  * @param {Date} date 日期\r\n  * @param {Number} offsetWeek 周(默认当前周)、前几周、后几周\r\n  * @param {Number} offsetDay 星期天(默认0)、星期一(1)、星期二(2)、星期三(3)、星期四(4)、星期五(5)、星期六(6)\r\n  * @param {Number} firstDay 周视图的起始天，默认星期一\r\n  * @return {Date}\r\n  */\nfunction getWhatWeek(date, offsetWeek, offsetDay, firstDay) {\n  date = toStringDate(date);\n  if (isValidDate(date)) {\n    var hasCustomDay = isNumber(offsetDay);\n    var hasStartDay = isNumber(firstDay);\n    var whatDayTime = helperGetDateTime(date);\n    // 如果指定了天或周视图起始天\n    if (hasCustomDay || hasStartDay) {\n      var viewStartDay = hasStartDay ? firstDay : setupDefaults.firstDayOfWeek;\n      var currentDay = date.getDay();\n      var customDay = hasCustomDay ? offsetDay : currentDay;\n      if (currentDay !== customDay) {\n        var offsetNum = 0;\n        if (viewStartDay > currentDay) {\n          offsetNum = -(7 - viewStartDay + currentDay);\n        } else if (viewStartDay < currentDay) {\n          offsetNum = viewStartDay - currentDay;\n        }\n        if (customDay > viewStartDay) {\n          whatDayTime += ((customDay === 0 ? 7 : customDay) - viewStartDay + offsetNum) * staticDayTime;\n        } else if (customDay < viewStartDay) {\n          whatDayTime += (7 - viewStartDay + customDay + offsetNum) * staticDayTime;\n        } else {\n          whatDayTime += offsetNum * staticDayTime;\n        }\n      }\n    }\n    if (offsetWeek && !isNaN(offsetWeek)) {\n      whatDayTime += offsetWeek * staticWeekTime;\n    }\n    return new Date(whatDayTime);\n  }\n  return date;\n}\nmodule.exports = getWhatWeek;","map":{"version":3,"names":["setupDefaults","require","staticDayTime","staticWeekTime","helperGetDateTime","toStringDate","isValidDate","isNumber","getWhatWeek","date","offsetWeek","offsetDay","firstDay","hasCustomDay","hasStartDay","whatDayTime","viewStartDay","firstDayOfWeek","currentDay","getDay","customDay","offsetNum","isNaN","Date","module","exports"],"sources":["D:/program/LanqiaoVue/vue-demo/node_modules/xe-utils/getWhatWeek.js"],"sourcesContent":["var setupDefaults = require('./setupDefaults')\r\n\r\nvar staticDayTime = require('./staticDayTime')\r\nvar staticWeekTime = require('./staticWeekTime')\r\n\r\nvar helperGetDateTime = require('./helperGetDateTime')\r\n\r\nvar toStringDate = require('./toStringDate')\r\n\r\nvar isValidDate = require('./isValidDate')\r\nvar isNumber = require('./isNumber')\r\n\r\n/**\r\n  * 返回前几周或后几周的星期几\r\n  *\r\n  * @param {Date} date 日期\r\n  * @param {Number} offsetWeek 周(默认当前周)、前几周、后几周\r\n  * @param {Number} offsetDay 星期天(默认0)、星期一(1)、星期二(2)、星期三(3)、星期四(4)、星期五(5)、星期六(6)\r\n  * @param {Number} firstDay 周视图的起始天，默认星期一\r\n  * @return {Date}\r\n  */\r\nfunction getWhatWeek (date, offsetWeek, offsetDay, firstDay) {\r\n  date = toStringDate(date)\r\n  if (isValidDate(date)) {\r\n    var hasCustomDay = isNumber(offsetDay)\r\n    var hasStartDay = isNumber(firstDay)\r\n    var whatDayTime = helperGetDateTime(date)\r\n    // 如果指定了天或周视图起始天\r\n    if (hasCustomDay || hasStartDay) {\r\n      var viewStartDay = hasStartDay ? firstDay : setupDefaults.firstDayOfWeek\r\n      var currentDay = date.getDay()\r\n      var customDay = hasCustomDay ? offsetDay : currentDay\r\n      if (currentDay !== customDay) {\r\n        var offsetNum = 0\r\n        if (viewStartDay > currentDay) {\r\n          offsetNum = -(7 - viewStartDay + currentDay)\r\n        } else if (viewStartDay < currentDay) {\r\n          offsetNum = viewStartDay - currentDay\r\n        }\r\n        if (customDay > viewStartDay) {\r\n          whatDayTime += ((customDay === 0 ? 7 : customDay) - viewStartDay + offsetNum) * staticDayTime\r\n        } else if (customDay < viewStartDay) {\r\n          whatDayTime += (7 - viewStartDay + customDay + offsetNum) * staticDayTime\r\n        } else {\r\n          whatDayTime += offsetNum * staticDayTime\r\n        }\r\n      }\r\n    }\r\n    if (offsetWeek && !isNaN(offsetWeek)) {\r\n      whatDayTime += offsetWeek * staticWeekTime\r\n    }\r\n    return new Date(whatDayTime)\r\n  }\r\n  return date\r\n}\r\n\r\nmodule.exports = getWhatWeek\r\n"],"mappings":"AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAE9C,IAAIC,aAAa,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AAC9C,IAAIE,cAAc,GAAGF,OAAO,CAAC,kBAAkB,CAAC;AAEhD,IAAIG,iBAAiB,GAAGH,OAAO,CAAC,qBAAqB,CAAC;AAEtD,IAAII,YAAY,GAAGJ,OAAO,CAAC,gBAAgB,CAAC;AAE5C,IAAIK,WAAW,GAAGL,OAAO,CAAC,eAAe,CAAC;AAC1C,IAAIM,QAAQ,GAAGN,OAAO,CAAC,YAAY,CAAC;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASO,WAAW,CAAEC,IAAI,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,EAAE;EAC3DH,IAAI,GAAGJ,YAAY,CAACI,IAAI,CAAC;EACzB,IAAIH,WAAW,CAACG,IAAI,CAAC,EAAE;IACrB,IAAII,YAAY,GAAGN,QAAQ,CAACI,SAAS,CAAC;IACtC,IAAIG,WAAW,GAAGP,QAAQ,CAACK,QAAQ,CAAC;IACpC,IAAIG,WAAW,GAAGX,iBAAiB,CAACK,IAAI,CAAC;IACzC;IACA,IAAII,YAAY,IAAIC,WAAW,EAAE;MAC/B,IAAIE,YAAY,GAAGF,WAAW,GAAGF,QAAQ,GAAGZ,aAAa,CAACiB,cAAc;MACxE,IAAIC,UAAU,GAAGT,IAAI,CAACU,MAAM,EAAE;MAC9B,IAAIC,SAAS,GAAGP,YAAY,GAAGF,SAAS,GAAGO,UAAU;MACrD,IAAIA,UAAU,KAAKE,SAAS,EAAE;QAC5B,IAAIC,SAAS,GAAG,CAAC;QACjB,IAAIL,YAAY,GAAGE,UAAU,EAAE;UAC7BG,SAAS,GAAG,EAAE,CAAC,GAAGL,YAAY,GAAGE,UAAU,CAAC;QAC9C,CAAC,MAAM,IAAIF,YAAY,GAAGE,UAAU,EAAE;UACpCG,SAAS,GAAGL,YAAY,GAAGE,UAAU;QACvC;QACA,IAAIE,SAAS,GAAGJ,YAAY,EAAE;UAC5BD,WAAW,IAAI,CAAC,CAACK,SAAS,KAAK,CAAC,GAAG,CAAC,GAAGA,SAAS,IAAIJ,YAAY,GAAGK,SAAS,IAAInB,aAAa;QAC/F,CAAC,MAAM,IAAIkB,SAAS,GAAGJ,YAAY,EAAE;UACnCD,WAAW,IAAI,CAAC,CAAC,GAAGC,YAAY,GAAGI,SAAS,GAAGC,SAAS,IAAInB,aAAa;QAC3E,CAAC,MAAM;UACLa,WAAW,IAAIM,SAAS,GAAGnB,aAAa;QAC1C;MACF;IACF;IACA,IAAIQ,UAAU,IAAI,CAACY,KAAK,CAACZ,UAAU,CAAC,EAAE;MACpCK,WAAW,IAAIL,UAAU,GAAGP,cAAc;IAC5C;IACA,OAAO,IAAIoB,IAAI,CAACR,WAAW,CAAC;EAC9B;EACA,OAAON,IAAI;AACb;AAEAe,MAAM,CAACC,OAAO,GAAGjB,WAAW"},"metadata":{},"sourceType":"script","externalDependencies":[]}