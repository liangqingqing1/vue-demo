{"ast":null,"code":"var setupDefaults = require('./setupDefaults');\nvar helperGetDateTime = require('./helperGetDateTime');\nvar helperNewDate = require('./helperNewDate');\nvar toStringDate = require('./toStringDate');\nvar isValidDate = require('./isValidDate');\n\n/**\r\n  * 返回两个日期之间差距,如果结束日期小于开始日期done为fasle\r\n  *\r\n  * @param {Date} startDate 开始日期\r\n  * @param {Date} endDate 结束日期或当期日期\r\n  * @param {Date} rule 自定义计算规则\r\n  * @return {Object}\r\n  */\nfunction getDateDiff(startDate, endDate, rules) {\n  var startTime, endTime, item, diffTime, rule, len, index;\n  var result = {\n    done: false,\n    time: 0\n  };\n  startDate = toStringDate(startDate);\n  endDate = endDate ? toStringDate(endDate) : helperNewDate();\n  if (isValidDate(startDate) && isValidDate(endDate)) {\n    startTime = helperGetDateTime(startDate);\n    endTime = helperGetDateTime(endDate);\n    if (startTime < endTime) {\n      diffTime = result.time = endTime - startTime;\n      rule = rules && rules.length > 0 ? rules : setupDefaults.dateDiffRules;\n      result.done = true;\n      for (index = 0, len = rule.length; index < len; index++) {\n        item = rule[index];\n        if (diffTime >= item[1]) {\n          if (index === len - 1) {\n            result[item[0]] = diffTime || 0;\n          } else {\n            result[item[0]] = Math.floor(diffTime / item[1]);\n            diffTime -= result[item[0]] * item[1];\n          }\n        } else {\n          result[item[0]] = 0;\n        }\n      }\n    }\n  }\n  return result;\n}\nmodule.exports = getDateDiff;","map":{"version":3,"names":["setupDefaults","require","helperGetDateTime","helperNewDate","toStringDate","isValidDate","getDateDiff","startDate","endDate","rules","startTime","endTime","item","diffTime","rule","len","index","result","done","time","length","dateDiffRules","Math","floor","module","exports"],"sources":["D:/program/LanqiaoVue/vue-demo/node_modules/xe-utils/getDateDiff.js"],"sourcesContent":["var setupDefaults = require('./setupDefaults')\r\n\r\nvar helperGetDateTime = require('./helperGetDateTime')\r\nvar helperNewDate = require('./helperNewDate')\r\n\r\nvar toStringDate = require('./toStringDate')\r\n\r\nvar isValidDate = require('./isValidDate')\r\n\r\n/**\r\n  * 返回两个日期之间差距,如果结束日期小于开始日期done为fasle\r\n  *\r\n  * @param {Date} startDate 开始日期\r\n  * @param {Date} endDate 结束日期或当期日期\r\n  * @param {Date} rule 自定义计算规则\r\n  * @return {Object}\r\n  */\r\nfunction getDateDiff (startDate, endDate, rules) {\r\n  var startTime, endTime, item, diffTime, rule, len, index\r\n  var result = { done: false, time: 0 }\r\n  startDate = toStringDate(startDate)\r\n  endDate = endDate ? toStringDate(endDate) : helperNewDate()\r\n  if (isValidDate(startDate) && isValidDate(endDate)) {\r\n    startTime = helperGetDateTime(startDate)\r\n    endTime = helperGetDateTime(endDate)\r\n    if (startTime < endTime) {\r\n      diffTime = result.time = endTime - startTime\r\n      rule = rules && rules.length > 0 ? rules : setupDefaults.dateDiffRules\r\n      result.done = true\r\n      for (index = 0, len = rule.length; index < len; index++) {\r\n        item = rule[index]\r\n        if (diffTime >= item[1]) {\r\n          if (index === len - 1) {\r\n            result[item[0]] = diffTime || 0\r\n          } else {\r\n            result[item[0]] = Math.floor(diffTime / item[1])\r\n            diffTime -= result[item[0]] * item[1]\r\n          }\r\n        } else {\r\n          result[item[0]] = 0\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return result\r\n}\r\n\r\nmodule.exports = getDateDiff\r\n"],"mappings":"AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAE9C,IAAIC,iBAAiB,GAAGD,OAAO,CAAC,qBAAqB,CAAC;AACtD,IAAIE,aAAa,GAAGF,OAAO,CAAC,iBAAiB,CAAC;AAE9C,IAAIG,YAAY,GAAGH,OAAO,CAAC,gBAAgB,CAAC;AAE5C,IAAII,WAAW,GAAGJ,OAAO,CAAC,eAAe,CAAC;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASK,WAAW,CAAEC,SAAS,EAAEC,OAAO,EAAEC,KAAK,EAAE;EAC/C,IAAIC,SAAS,EAAEC,OAAO,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,GAAG,EAAEC,KAAK;EACxD,IAAIC,MAAM,GAAG;IAAEC,IAAI,EAAE,KAAK;IAAEC,IAAI,EAAE;EAAE,CAAC;EACrCZ,SAAS,GAAGH,YAAY,CAACG,SAAS,CAAC;EACnCC,OAAO,GAAGA,OAAO,GAAGJ,YAAY,CAACI,OAAO,CAAC,GAAGL,aAAa,EAAE;EAC3D,IAAIE,WAAW,CAACE,SAAS,CAAC,IAAIF,WAAW,CAACG,OAAO,CAAC,EAAE;IAClDE,SAAS,GAAGR,iBAAiB,CAACK,SAAS,CAAC;IACxCI,OAAO,GAAGT,iBAAiB,CAACM,OAAO,CAAC;IACpC,IAAIE,SAAS,GAAGC,OAAO,EAAE;MACvBE,QAAQ,GAAGI,MAAM,CAACE,IAAI,GAAGR,OAAO,GAAGD,SAAS;MAC5CI,IAAI,GAAGL,KAAK,IAAIA,KAAK,CAACW,MAAM,GAAG,CAAC,GAAGX,KAAK,GAAGT,aAAa,CAACqB,aAAa;MACtEJ,MAAM,CAACC,IAAI,GAAG,IAAI;MAClB,KAAKF,KAAK,GAAG,CAAC,EAAED,GAAG,GAAGD,IAAI,CAACM,MAAM,EAAEJ,KAAK,GAAGD,GAAG,EAAEC,KAAK,EAAE,EAAE;QACvDJ,IAAI,GAAGE,IAAI,CAACE,KAAK,CAAC;QAClB,IAAIH,QAAQ,IAAID,IAAI,CAAC,CAAC,CAAC,EAAE;UACvB,IAAII,KAAK,KAAKD,GAAG,GAAG,CAAC,EAAE;YACrBE,MAAM,CAACL,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGC,QAAQ,IAAI,CAAC;UACjC,CAAC,MAAM;YACLI,MAAM,CAACL,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGU,IAAI,CAACC,KAAK,CAACV,QAAQ,GAAGD,IAAI,CAAC,CAAC,CAAC,CAAC;YAChDC,QAAQ,IAAII,MAAM,CAACL,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC;UACvC;QACF,CAAC,MAAM;UACLK,MAAM,CAACL,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QACrB;MACF;IACF;EACF;EACA,OAAOK,MAAM;AACf;AAEAO,MAAM,CAACC,OAAO,GAAGnB,WAAW"},"metadata":{},"sourceType":"script","externalDependencies":[]}